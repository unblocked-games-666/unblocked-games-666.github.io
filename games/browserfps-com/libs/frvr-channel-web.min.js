!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=function(t){return t&&t.Math==Math&&t},r=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||function(){return this}()||t||Function("return this")(),n="object"==typeof document&&document.all,o={all:n,IS_HTMLDDA:void 0===n&&void 0!==n},i=o.all,a=o.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t},u=a,s=o.all,c=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:u(t)||t===s}:function(t){return"object"==typeof t?null!==t:u(t)},f=c,l=r.document,h=f(l)&&f(l.createElement),p=function(t){return h?l.createElement(t):{}},v=p("span").classList,g=v&&v.constructor&&v.constructor.prototype,d=g===Object.prototype?void 0:g,y=function(t){try{return!!t()}catch(t){return!0}},m=!y((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),b=m,w=Function.prototype,S=w.call,P=b&&w.bind.bind(S,S),O=b?P:function(t){return function(){return S.apply(t,arguments)}},R=O,x=R({}.toString),L=R("".slice),j=function(t){return L(x(t),8,-1)},E=y,k=j,A=Object,I=O("".split),T=E((function(){return!A("z").propertyIsEnumerable(0)}))?function(t){return"String"==k(t)?I(t,""):A(t)}:A,U=function(t){return null==t},C=U,M=TypeError,_=function(t){if(C(t))throw M("Can't call method on "+t);return t},B=T,H=_,F=function(t){return B(H(t))},q={exports:{}},D=r,N=Object.defineProperty,z=function(t,e){try{N(D,t,{value:e,configurable:!0,writable:!0})}catch(r){D[t]=e}return e},$=z,G="__core-js_shared__",V=r[G]||$(G,{}),W=V;(q.exports=function(t,e){return W[t]||(W[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.31.1",mode:"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Y,K,Q=_,J=Object,X=function(t){return J(Q(t))},Z=X,tt=O({}.hasOwnProperty),et=Object.hasOwn||function(t,e){return tt(Z(t),e)},rt=O,nt=0,ot=Math.random(),it=rt(1..toString),at=function(t){return"Symbol("+(void 0===t?"":t)+")_"+it(++nt+ot,36)},ut=r,st="undefined"!=typeof navigator&&String(navigator.userAgent)||"",ct=ut.process,ft=ut.Deno,lt=ct&&ct.versions||ft&&ft.version,ht=lt&&lt.v8;ht&&(K=(Y=ht.split("."))[0]>0&&Y[0]<4?1:+(Y[0]+Y[1])),!K&&st&&(!(Y=st.match(/Edge\/(\d+)/))||Y[1]>=74)&&(Y=st.match(/Chrome\/(\d+)/))&&(K=+Y[1]);var pt=K,vt=pt,gt=y,dt=r.String,yt=!!Object.getOwnPropertySymbols&&!gt((function(){var t=Symbol();return!dt(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&vt&&vt<41})),mt=yt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,bt=r,wt=q.exports,St=et,Pt=at,Ot=yt,Rt=mt,xt=bt.Symbol,Lt=wt("wks"),jt=Rt?xt.for||xt:xt&&xt.withoutSetter||Pt,Et=function(t){return St(Lt,t)||(Lt[t]=Ot&&St(xt,t)?xt[t]:jt("Symbol."+t)),Lt[t]},kt=c,At=String,It=TypeError,Tt=function(t){if(kt(t))return t;throw It(At(t)+" is not an object")},Ut={},Ct=!y((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Mt=Ct&&y((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),_t={},Bt=p,Ht=!Ct&&!y((function(){return 7!=Object.defineProperty(Bt("div"),"a",{get:function(){return 7}}).a})),Ft=m,qt=Function.prototype.call,Dt=Ft?qt.bind(qt):function(){return qt.apply(qt,arguments)},Nt=r,zt=a,$t=function(t){return zt(t)?t:void 0},Gt=function(t,e){return arguments.length<2?$t(Nt[t]):Nt[t]&&Nt[t][e]},Vt=O({}.isPrototypeOf),Wt=Gt,Yt=a,Kt=Vt,Qt=Object,Jt=mt?function(t){return"symbol"==typeof t}:function(t){var e=Wt("Symbol");return Yt(e)&&Kt(e.prototype,Qt(t))},Xt=String,Zt=function(t){try{return Xt(t)}catch(t){return"Object"}},te=a,ee=Zt,re=TypeError,ne=function(t){if(te(t))return t;throw re(ee(t)+" is not a function")},oe=ne,ie=U,ae=function(t,e){var r=t[e];return ie(r)?void 0:oe(r)},ue=Dt,se=a,ce=c,fe=TypeError,le=Dt,he=c,pe=Jt,ve=ae,ge=function(t,e){var r,n;if("string"===e&&se(r=t.toString)&&!ce(n=ue(r,t)))return n;if(se(r=t.valueOf)&&!ce(n=ue(r,t)))return n;if("string"!==e&&se(r=t.toString)&&!ce(n=ue(r,t)))return n;throw fe("Can't convert object to primitive value")},de=TypeError,ye=Et("toPrimitive"),me=function(t,e){if(!he(t)||pe(t))return t;var r,n=ve(t,ye);if(n){if(void 0===e&&(e="default"),r=le(n,t,e),!he(r)||pe(r))return r;throw de("Can't convert object to primitive value")}return void 0===e&&(e="number"),ge(t,e)},be=Jt,we=function(t){var e=me(t,"string");return be(e)?e:e+""},Se=Ct,Pe=Ht,Oe=Mt,Re=Tt,xe=we,Le=TypeError,je=Object.defineProperty,Ee=Object.getOwnPropertyDescriptor,ke="enumerable",Ae="configurable",Ie="writable";_t.f=Se?Oe?function(t,e,r){if(Re(t),e=xe(e),Re(r),"function"==typeof t&&"prototype"===e&&"value"in r&&Ie in r&&!r.writable){var n=Ee(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:Ae in r?r.configurable:n.configurable,enumerable:ke in r?r.enumerable:n.enumerable,writable:!1})}return je(t,e,r)}:je:function(t,e,r){if(Re(t),e=xe(e),Re(r),Pe)try{return je(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Le("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var Te=Math.ceil,Ue=Math.floor,Ce=Math.trunc||function(t){var e=+t;return(e>0?Ue:Te)(e)},Me=function(t){var e=+t;return e!=e||0===e?0:Ce(e)},_e=Me,Be=Math.max,He=Math.min,Fe=function(t,e){var r=_e(t);return r<0?Be(r+e,0):He(r,e)},qe=Me,De=Math.min,Ne=function(t){return t>0?De(qe(t),9007199254740991):0},ze=Ne,$e=function(t){return ze(t.length)},Ge=F,Ve=Fe,We=$e,Ye=function(t){return function(e,r,n){var o,i=Ge(e),a=We(i),u=Ve(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},Ke={includes:Ye(!0),indexOf:Ye(!1)},Qe={},Je=et,Xe=F,Ze=Ke.indexOf,tr=Qe,er=O([].push),rr=function(t,e){var r,n=Xe(t),o=0,i=[];for(r in n)!Je(tr,r)&&Je(n,r)&&er(i,r);for(;e.length>o;)Je(n,r=e[o++])&&(~Ze(i,r)||er(i,r));return i},nr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],or=rr,ir=nr,ar=Object.keys||function(t){return or(t,ir)},ur=Ct,sr=Mt,cr=_t,fr=Tt,lr=F,hr=ar;Ut.f=ur&&!sr?Object.defineProperties:function(t,e){fr(t);for(var r,n=lr(e),o=hr(e),i=o.length,a=0;i>a;)cr.f(t,r=o[a++],n[r]);return t};var pr,vr=Gt("document","documentElement"),gr=q.exports,dr=at,yr=gr("keys"),mr=function(t){return yr[t]||(yr[t]=dr(t))},br=Tt,wr=Ut,Sr=nr,Pr=Qe,Or=vr,Rr=p,xr=mr("IE_PROTO"),Lr=function(){},jr=function(t){return"<script>"+t+"</"+"script>"},Er=function(t){t.write(jr("")),t.close();var e=t.parentWindow.Object;return t=null,e},kr=function(){try{pr=new ActiveXObject("htmlfile")}catch(t){}var t,e;kr="undefined"!=typeof document?document.domain&&pr?Er(pr):((e=Rr("iframe")).style.display="none",Or.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(jr("document.F=Object")),t.close(),t.F):Er(pr);for(var r=Sr.length;r--;)delete kr.prototype[Sr[r]];return kr()};Pr[xr]=!0;var Ar=Object.create||function(t,e){var r;return null!==t?(Lr.prototype=br(t),r=new Lr,Lr.prototype=null,r[xr]=t):r=kr(),void 0===e?r:wr.f(r,e)},Ir=Et,Tr=Ar,Ur=_t.f,Cr=Ir("unscopables"),Mr=Array.prototype;null==Mr[Cr]&&Ur(Mr,Cr,{configurable:!0,value:Tr(null)});var _r,Br,Hr,Fr={},qr=a,Dr=r.WeakMap,Nr=qr(Dr)&&/native code/.test(String(Dr)),zr=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},$r=_t,Gr=zr,Vr=Ct?function(t,e,r){return $r.f(t,e,Gr(1,r))}:function(t,e,r){return t[e]=r,t},Wr=Nr,Yr=r,Kr=c,Qr=Vr,Jr=et,Xr=V,Zr=mr,tn=Qe,en="Object already initialized",rn=Yr.TypeError,nn=Yr.WeakMap;if(Wr||Xr.state){var on=Xr.state||(Xr.state=new nn);on.get=on.get,on.has=on.has,on.set=on.set,_r=function(t,e){if(on.has(t))throw rn(en);return e.facade=t,on.set(t,e),e},Br=function(t){return on.get(t)||{}},Hr=function(t){return on.has(t)}}else{var an=Zr("state");tn[an]=!0,_r=function(t,e){if(Jr(t,an))throw rn(en);return e.facade=t,Qr(t,an,e),e},Br=function(t){return Jr(t,an)?t[an]:{}},Hr=function(t){return Jr(t,an)}}var un={set:_r,get:Br,has:Hr,enforce:function(t){return Hr(t)?Br(t):_r(t,{})},getterFor:function(t){return function(e){var r;if(!Kr(e)||(r=Br(e)).type!==t)throw rn("Incompatible receiver, "+t+" required");return r}}},sn={},cn={},fn={}.propertyIsEnumerable,ln=Object.getOwnPropertyDescriptor,hn=ln&&!fn.call({1:2},1);cn.f=hn?function(t){var e=ln(this,t);return!!e&&e.enumerable}:fn;var pn=Ct,vn=Dt,gn=cn,dn=zr,yn=F,mn=we,bn=et,wn=Ht,Sn=Object.getOwnPropertyDescriptor;sn.f=pn?Sn:function(t,e){if(t=yn(t),e=mn(e),wn)try{return Sn(t,e)}catch(t){}if(bn(t,e))return dn(!vn(gn.f,t,e),t[e])};var Pn={exports:{}},On=Ct,Rn=et,xn=Function.prototype,Ln=On&&Object.getOwnPropertyDescriptor,jn=Rn(xn,"name"),En={EXISTS:jn,PROPER:jn&&"something"===function(){}.name,CONFIGURABLE:jn&&(!On||On&&Ln(xn,"name").configurable)},kn=a,An=V,In=O(Function.toString);kn(An.inspectSource)||(An.inspectSource=function(t){return In(t)});var Tn=An.inspectSource,Un=O,Cn=y,Mn=a,_n=et,Bn=Ct,Hn=En.CONFIGURABLE,Fn=Tn,qn=un.enforce,Dn=un.get,Nn=String,zn=Object.defineProperty,$n=Un("".slice),Gn=Un("".replace),Vn=Un([].join),Wn=Bn&&!Cn((function(){return 8!==zn((function(){}),"length",{value:8}).length})),Yn=String(String).split("String"),Kn=Pn.exports=function(t,e,r){"Symbol("===$n(Nn(e),0,7)&&(e="["+Gn(Nn(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!_n(t,"name")||Hn&&t.name!==e)&&(Bn?zn(t,"name",{value:e,configurable:!0}):t.name=e),Wn&&r&&_n(r,"arity")&&t.length!==r.arity&&zn(t,"length",{value:r.arity});try{r&&_n(r,"constructor")&&r.constructor?Bn&&zn(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=qn(t);return _n(n,"source")||(n.source=Vn(Yn,"string"==typeof e?e:"")),t};Function.prototype.toString=Kn((function(){return Mn(this)&&Dn(this).source||Fn(this)}),"toString");var Qn=a,Jn=_t,Xn=Pn.exports,Zn=z,to=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(Qn(r)&&Xn(r,i,n),n.global)o?t[e]=r:Zn(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:Jn.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},eo={},ro=rr,no=nr.concat("length","prototype");eo.f=Object.getOwnPropertyNames||function(t){return ro(t,no)};var oo={};oo.f=Object.getOwnPropertySymbols;var io,ao,uo,so=Gt,co=eo,fo=oo,lo=Tt,ho=O([].concat),po=so("Reflect","ownKeys")||function(t){var e=co.f(lo(t)),r=fo.f;return r?ho(e,r(t)):e},vo=et,go=po,yo=sn,mo=_t,bo=y,wo=a,So=/#|\.prototype\./,Po=function(t,e){var r=Ro[Oo(t)];return r==Lo||r!=xo&&(wo(e)?bo(e):!!e)},Oo=Po.normalize=function(t){return String(t).replace(So,".").toLowerCase()},Ro=Po.data={},xo=Po.NATIVE="N",Lo=Po.POLYFILL="P",jo=Po,Eo=r,ko=sn.f,Ao=Vr,Io=to,To=z,Uo=function(t,e,r){for(var n=go(e),o=mo.f,i=yo.f,a=0;a<n.length;a++){var u=n[a];vo(t,u)||r&&vo(r,u)||o(t,u,i(e,u))}},Co=jo,Mo=function(t,e){var r,n,o,i,a,u=t.target,s=t.global,c=t.stat;if(r=s?Eo:c?Eo[u]||To(u,{}):(Eo[u]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(a=ko(r,n))&&a.value:r[n],!Co(s?n:u+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Uo(i,o)}(t.sham||o&&o.sham)&&Ao(i,"sham",!0),Io(r,n,i,t)}},_o=!y((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Bo=et,Ho=a,Fo=X,qo=_o,Do=mr("IE_PROTO"),No=Object,zo=No.prototype,$o=qo?No.getPrototypeOf:function(t){var e=Fo(t);if(Bo(e,Do))return e[Do];var r=e.constructor;return Ho(r)&&e instanceof r?r.prototype:e instanceof No?zo:null},Go=y,Vo=a,Wo=c,Yo=$o,Ko=to,Qo=Et("iterator"),Jo=!1;[].keys&&("next"in(uo=[].keys())?(ao=Yo(Yo(uo)))!==Object.prototype&&(io=ao):Jo=!0);var Xo=!Wo(io)||Go((function(){var t={};return io[Qo].call(t)!==t}));Xo&&(io={}),Vo(io[Qo])||Ko(io,Qo,(function(){return this}));var Zo={IteratorPrototype:io,BUGGY_SAFARI_ITERATORS:Jo},ti=_t.f,ei=et,ri=Et("toStringTag"),ni=function(t,e,r){t&&!r&&(t=t.prototype),t&&!ei(t,ri)&&ti(t,ri,{configurable:!0,value:e})},oi=Zo.IteratorPrototype,ii=Ar,ai=zr,ui=ni,si=Fr,ci=function(){return this},fi=function(t,e,r,n){var o=e+" Iterator";return t.prototype=ii(oi,{next:ai(+!n,r)}),ui(t,o,!1),si[o]=ci,t},li=O,hi=ne,pi=a,vi=String,gi=TypeError,di=function(t,e,r){try{return li(hi(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}},yi=Tt,mi=function(t){if("object"==typeof t||pi(t))return t;throw gi("Can't set "+vi(t)+" as a prototype")},bi=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=di(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return yi(r),mi(n),e?t(r,n):r.__proto__=n,r}}():void 0),wi=Mo,Si=Dt,Pi=a,Oi=fi,Ri=$o,xi=bi,Li=ni,ji=Vr,Ei=to,ki=Fr,Ai=En.PROPER,Ii=En.CONFIGURABLE,Ti=Zo.IteratorPrototype,Ui=Zo.BUGGY_SAFARI_ITERATORS,Ci=Et("iterator"),Mi="keys",_i="values",Bi="entries",Hi=function(){return this},Fi=function(t,e,r,n,o,i,a){Oi(r,e,n);var u,s,c,f=function(t){if(t===o&&g)return g;if(!Ui&&t in p)return p[t];switch(t){case Mi:case _i:case Bi:return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",h=!1,p=t.prototype,v=p[Ci]||p["@@iterator"]||o&&p[o],g=!Ui&&v||f(o),d="Array"==e&&p.entries||v;if(d&&(u=Ri(d.call(new t)))!==Object.prototype&&u.next&&(Ri(u)!==Ti&&(xi?xi(u,Ti):Pi(u[Ci])||Ei(u,Ci,Hi)),Li(u,l,!0)),Ai&&o==_i&&v&&v.name!==_i&&(Ii?ji(p,"name",_i):(h=!0,g=function(){return Si(v,this)})),o)if(s={values:f(_i),keys:i?g:f(Mi),entries:f(Bi)},a)for(c in s)(Ui||h||!(c in p))&&Ei(p,c,s[c]);else wi({target:e,proto:!0,forced:Ui||h},s);return p[Ci]!==g&&Ei(p,Ci,g,{name:o}),ki[e]=g,s},qi=function(t,e){return{value:t,done:e}},Di=F,Ni=function(t){Mr[Cr][t]=!0},zi=Fr,$i=un,Gi=_t.f,Vi=Fi,Wi=qi,Yi=Ct,Ki="Array Iterator",Qi=$i.set,Ji=$i.getterFor(Ki),Xi=Vi(Array,"Array",(function(t,e){Qi(this,{type:Ki,target:Di(t),index:0,kind:e})}),(function(){var t=Ji(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,Wi(void 0,!0)):Wi("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),Zi=zi.Arguments=zi.Array;if(Ni("keys"),Ni("values"),Ni("entries"),Yi&&"values"!==Zi.name)try{Gi(Zi,"name",{value:"values"})}catch(t){}var ta=r,ea={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ra=d,na=Xi,oa=Vr,ia=Et,aa=ia("iterator"),ua=ia("toStringTag"),sa=na.values,ca=function(t,e){if(t){if(t[aa]!==sa)try{oa(t,aa,sa)}catch(e){t[aa]=sa}if(t[ua]||oa(t,ua,e),ea[e])for(var r in na)if(t[r]!==na[r])try{oa(t,r,na[r])}catch(e){t[r]=na[r]}}};for(var fa in ea)ca(ta[fa]&&ta[fa].prototype,fa);ca(ra,"DOMTokenList");var la=m,ha=Function.prototype,pa=ha.apply,va=ha.call,ga="object"==typeof Reflect&&Reflect.apply||(la?va.bind(pa):function(){return va.apply(pa,arguments)}),da={};da[Et("toStringTag")]="z";var ya,ma,ba="[object z]"===String(da),wa=a,Sa=j,Pa=Et("toStringTag"),Oa=Object,Ra="Arguments"==Sa(function(){return arguments}()),xa=ba?Sa:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Oa(t),Pa))?r:Ra?Sa(e):"Object"==(n=Sa(e))&&wa(e.callee)?"Arguments":n},La=xa,ja=String,Ea=function(t){if("Symbol"===La(t))throw TypeError("Cannot convert a Symbol value to a string");return ja(t)},ka=Tt,Aa=function(){var t=ka(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},Ia=y,Ta=r.RegExp,Ua=Ia((function(){var t=Ta("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Ca=Ua||Ia((function(){return!Ta("a","y").sticky})),Ma={BROKEN_CARET:Ua||Ia((function(){var t=Ta("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:Ca,UNSUPPORTED_Y:Ua},_a=y,Ba=r.RegExp,Ha=_a((function(){var t=Ba(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Fa=y,qa=r.RegExp,Da=Fa((function(){var t=qa("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Na=Dt,za=O,$a=Ea,Ga=Aa,Va=Ma,Wa=q.exports,Ya=Ar,Ka=un.get,Qa=Ha,Ja=Da,Xa=Wa("native-string-replace",String.prototype.replace),Za=RegExp.prototype.exec,tu=Za,eu=za("".charAt),ru=za("".indexOf),nu=za("".replace),ou=za("".slice),iu=(ma=/b*/g,Na(Za,ya=/a/,"a"),Na(Za,ma,"a"),0!==ya.lastIndex||0!==ma.lastIndex),au=Va.BROKEN_CARET,uu=void 0!==/()??/.exec("")[1];(iu||uu||au||Qa||Ja)&&(tu=function(t){var e,r,n,o,i,a,u,s=this,c=Ka(s),f=$a(t),l=c.raw;if(l)return l.lastIndex=s.lastIndex,e=Na(tu,l,f),s.lastIndex=l.lastIndex,e;var h=c.groups,p=au&&s.sticky,v=Na(Ga,s),g=s.source,d=0,y=f;if(p&&(v=nu(v,"y",""),-1===ru(v,"g")&&(v+="g"),y=ou(f,s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==eu(f,s.lastIndex-1))&&(g="(?: "+g+")",y=" "+y,d++),r=new RegExp("^(?:"+g+")",v)),uu&&(r=new RegExp("^"+g+"$(?!\\s)",v)),iu&&(n=s.lastIndex),o=Na(Za,p?r:s,y),p?o?(o.input=ou(o.input,d),o[0]=ou(o[0],d),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:iu&&o&&(s.lastIndex=s.global?o.index+o[0].length:n),uu&&o&&o.length>1&&Na(Xa,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=Ya(null),i=0;i<h.length;i++)a[(u=h[i])[0]]=o[u[1]];return o});var su=tu;Mo({target:"RegExp",proto:!0,forced:/./.exec!==su},{exec:su});var cu=j,fu=O,lu=function(t){if("Function"===cu(t))return fu(t)},hu=lu,pu=to,vu=su,gu=y,du=Et,yu=Vr,mu=du("species"),bu=RegExp.prototype,wu=O,Su=Me,Pu=Ea,Ou=_,Ru=wu("".charAt),xu=wu("".charCodeAt),Lu=wu("".slice),ju=function(t){return function(e,r){var n,o,i=Pu(Ou(e)),a=Su(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=xu(i,a))<55296||n>56319||a+1===u||(o=xu(i,a+1))<56320||o>57343?t?Ru(i,a):n:t?Lu(i,a,a+2):o-56320+(n-55296<<10)+65536}},Eu={codeAt:ju(!1),charAt:ju(!0)},ku=Eu.charAt,Au=O,Iu=X,Tu=Math.floor,Uu=Au("".charAt),Cu=Au("".replace),Mu=Au("".slice),_u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Bu=/\$([$&'`]|\d{1,2})/g,Hu=function(t,e,r,n,o,i){var a=r+t.length,u=n.length,s=Bu;return void 0!==o&&(o=Iu(o),s=_u),Cu(i,s,(function(i,s){var c;switch(Uu(s,0)){case"$":return"$";case"&":return t;case"`":return Mu(e,0,r);case"'":return Mu(e,a);case"<":c=o[Mu(s,1,-1)];break;default:var f=+s;if(0===f)return i;if(f>u){var l=Tu(f/10);return 0===l?i:l<=u?void 0===n[l-1]?Uu(s,1):n[l-1]+Uu(s,1):i}c=n[f-1]}return void 0===c?"":c}))},Fu=Dt,qu=Tt,Du=a,Nu=j,zu=su,$u=TypeError,Gu=ga,Vu=Dt,Wu=O,Yu=function(t,e,r,n){var o=du(t),i=!gu((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!gu((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[mu]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||r){var u=hu(/./[o]),s=e(o,""[t],(function(t,e,r,n,o){var a=hu(t),s=e.exec;return s===vu||s===bu.exec?i&&!o?{done:!0,value:u(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));pu(String.prototype,t,s[0]),pu(bu,o,s[1])}n&&yu(bu[o],"sham",!0)},Ku=y,Qu=Tt,Ju=a,Xu=U,Zu=Me,ts=Ne,es=Ea,rs=_,ns=function(t,e,r){return e+(r?ku(t,e).length:1)},os=ae,is=Hu,as=function(t,e){var r=t.exec;if(Du(r)){var n=Fu(r,t,e);return null!==n&&qu(n),n}if("RegExp"===Nu(t))return Fu(zu,t,e);throw $u("RegExp#exec called on incompatible receiver")},us=Et("replace"),ss=Math.max,cs=Math.min,fs=Wu([].concat),ls=Wu([].push),hs=Wu("".indexOf),ps=Wu("".slice),vs="$0"==="a".replace(/./,"$0"),gs=!!/./[us]&&""===/./[us]("a","$0");Yu("replace",(function(t,e,r){var n=gs?"$":"$0";return[function(t,r){var n=rs(this),o=Xu(t)?void 0:os(t,us);return o?Vu(o,t,n,r):Vu(e,es(n),t,r)},function(t,o){var i=Qu(this),a=es(t);if("string"==typeof o&&-1===hs(o,n)&&-1===hs(o,"$<")){var u=r(e,i,a,o);if(u.done)return u.value}var s=Ju(o);s||(o=es(o));var c=i.global;if(c){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var h=as(i,a);if(null===h)break;if(ls(l,h),!c)break;""===es(h[0])&&(i.lastIndex=ns(a,ts(i.lastIndex),f))}for(var p,v="",g=0,d=0;d<l.length;d++){for(var y=es((h=l[d])[0]),m=ss(cs(Zu(h.index),a.length),0),b=[],w=1;w<h.length;w++)ls(b,void 0===(p=h[w])?p:String(p));var S=h.groups;if(s){var P=fs([y],b,m,a);void 0!==S&&ls(P,S);var O=es(Gu(o,void 0,P))}else O=is(y,a,m,b,S,o);m>=g&&(v+=ps(a,g,m)+O,g=m+y.length)}return v+ps(a,g)}]}),!!Ku((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!vs||gs);var ds=r.Promise,ys=O,ms=y,bs=a,ws=xa,Ss=Tn,Ps=function(){},Os=[],Rs=Gt("Reflect","construct"),xs=/^\s*(?:class|function)\b/,Ls=ys(xs.exec),js=!xs.exec(Ps),Es=function(t){if(!bs(t))return!1;try{return Rs(Ps,Os,t),!0}catch(t){return!1}},ks=function(t){if(!bs(t))return!1;switch(ws(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return js||!!Ls(xs,Ss(t))}catch(t){return!0}};ks.sham=!0;var As=!Rs||ms((function(){var t;return Es(Es.call)||!Es(Object)||!Es((function(){t=!0}))||t}))?ks:Es,Is=As,Ts=Zt,Us=TypeError,Cs=Tt,Ms=function(t){if(Is(t))return t;throw Us(Ts(t)+" is not a constructor")},_s=U,Bs=Et("species"),Hs={},Fs=ne,qs=TypeError,Ds=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw qs("Bad Promise constructor");e=t,r=n})),this.resolve=Fs(e),this.reject=Fs(r)};Hs.f=function(t){return new Ds(t)};var Ns=Tt,zs=c,$s=Hs,Gs=Mo,Vs=ds,Ws=y,Ys=Gt,Ks=a,Qs=function(t,e){var r,n=Cs(t).constructor;return void 0===n||_s(r=Cs(n)[Bs])?e:Ms(r)},Js=function(t,e){if(Ns(t),zs(e)&&e.constructor===t)return e;var r=$s.f(t);return(0,r.resolve)(e),r.promise},Xs=to,Zs=Vs&&Vs.prototype;if(Gs({target:"Promise",proto:!0,real:!0,forced:!!Vs&&Ws((function(){Zs.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=Qs(this,Ys("Promise")),r=Ks(t);return this.then(r?function(r){return Js(e,t()).then((function(){return r}))}:t,r?function(r){return Js(e,t()).then((function(){throw r}))}:t)}}),Ks(Vs)){var tc=Ys("Promise").prototype.finally;Zs.finally!==tc&&Xs(Zs,"finally",tc,{unsafe:!0})}var ec=y,rc=Ct,nc=Et("iterator"),oc=!ec((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r=new URLSearchParams("a=1&a=2"),n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),r.delete("a",2),!e.size&&!rc||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[nc]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),ic=Pn.exports,ac=_t,uc=function(t,e,r){return r.get&&ic(r.get,e,{getter:!0}),r.set&&ic(r.set,e,{setter:!0}),ac.f(t,e,r)},sc=to,cc=Vt,fc=TypeError,lc=function(t,e){if(cc(e,t))return t;throw fc("Incorrect invocation")},hc=ne,pc=m,vc=lu(lu.bind),gc=function(t,e){return hc(t),void 0===e?t:pc?vc(t,e):function(){return t.apply(e,arguments)}},dc=xa,yc=ae,mc=U,bc=Fr,wc=Et("iterator"),Sc=function(t){if(!mc(t))return yc(t,wc)||yc(t,"@@iterator")||bc[dc(t)]},Pc=Dt,Oc=ne,Rc=Tt,xc=Zt,Lc=Sc,jc=TypeError,Ec=function(t,e){var r=arguments.length<2?Lc(t):e;if(Oc(r))return Rc(Pc(r,t));throw jc(xc(t)+" is not iterable")},kc=TypeError,Ac=function(t,e){if(t<e)throw kc("Not enough arguments");return t},Ic=we,Tc=_t,Uc=zr,Cc=function(t,e,r){var n=Ic(e);n in t?Tc.f(t,n,Uc(0,r)):t[n]=r},Mc=Fe,_c=$e,Bc=Cc,Hc=Array,Fc=Math.max,qc=function(t,e,r){for(var n=_c(t),o=Mc(e,n),i=Mc(void 0===r?n:r,n),a=Hc(Fc(i-o,0)),u=0;o<i;o++,u++)Bc(a,u,t[o]);return a.length=u,a},Dc=qc,Nc=Math.floor,zc=function(t,e){var r=t.length,n=Nc(r/2);return r<8?$c(t,e):Gc(t,zc(Dc(t,0,n),e),zc(Dc(t,n),e),e)},$c=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},Gc=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,u=0;a<o||u<i;)t[a+u]=a<o&&u<i?n(e[a],r[u])<=0?e[a++]:r[u++]:a<o?e[a++]:r[u++];return t},Vc=Mo,Wc=r,Yc=Dt,Kc=O,Qc=Ct,Jc=oc,Xc=to,Zc=uc,tf=function(t,e,r){for(var n in e)sc(t,n,e[n],r);return t},ef=ni,rf=fi,nf=un,of=lc,af=a,uf=et,sf=gc,cf=xa,ff=Tt,lf=c,hf=Ea,pf=Ar,vf=zr,gf=Ec,df=Sc,yf=Ac,mf=zc,bf=Et("iterator"),wf="URLSearchParams",Sf="URLSearchParamsIterator",Pf=nf.set,Of=nf.getterFor(wf),Rf=nf.getterFor(Sf),xf=Object.getOwnPropertyDescriptor,Lf=function(t){if(!Qc)return Wc[t];var e=xf(Wc,t);return e&&e.value},jf=Lf("fetch"),Ef=Lf("Request"),kf=Lf("Headers"),Af=Ef&&Ef.prototype,If=kf&&kf.prototype,Tf=Wc.RegExp,Uf=Wc.TypeError,Cf=Wc.decodeURIComponent,Mf=Wc.encodeURIComponent,_f=Kc("".charAt),Bf=Kc([].join),Hf=Kc([].push),Ff=Kc("".replace),qf=Kc([].shift),Df=Kc([].splice),Nf=Kc("".split),zf=Kc("".slice),$f=/\+/g,Gf=Array(4),Vf=function(t){return Gf[t-1]||(Gf[t-1]=Tf("((?:%[\\da-f]{2}){"+t+"})","gi"))},Wf=function(t){try{return Cf(t)}catch(e){return t}},Yf=function(t){var e=Ff(t,$f," "),r=4;try{return Cf(e)}catch(t){for(;r;)e=Ff(e,Vf(r--),Wf);return e}},Kf=/[!'()~]|%20/g,Qf={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Jf=function(t){return Qf[t]},Xf=function(t){return Ff(Mf(t),Kf,Jf)},Zf=rf((function(t,e){Pf(this,{type:Sf,iterator:gf(Of(t).entries),kind:e})}),"Iterator",(function(){var t=Rf(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r}),!0),tl=function(t){this.entries=[],this.url=null,void 0!==t&&(lf(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===_f(t,0)?zf(t,1):t:hf(t)))};tl.prototype={type:wf,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,n,o,i,a,u,s=df(t);if(s)for(r=(e=gf(t,s)).next;!(n=Yc(r,e)).done;){if(i=(o=gf(ff(n.value))).next,(a=Yc(i,o)).done||(u=Yc(i,o)).done||!Yc(i,o).done)throw Uf("Expected sequence with length 2");Hf(this.entries,{key:hf(a.value),value:hf(u.value)})}else for(var c in t)uf(t,c)&&Hf(this.entries,{key:c,value:hf(t[c])})},parseQuery:function(t){if(t)for(var e,r,n=Nf(t,"&"),o=0;o<n.length;)(e=n[o++]).length&&(r=Nf(e,"="),Hf(this.entries,{key:Yf(qf(r)),value:Yf(Bf(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],n=0;n<e.length;)t=e[n++],Hf(r,Xf(t.key)+"="+Xf(t.value));return Bf(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var el=function(){of(this,rl);var t=arguments.length>0?arguments[0]:void 0,e=Pf(this,new tl(t));Qc||(this.size=e.entries.length)},rl=el.prototype;if(tf(rl,{append:function(t,e){var r=Of(this);yf(arguments.length,2),Hf(r.entries,{key:hf(t),value:hf(e)}),Qc||this.length++,r.updateURL()},delete:function(t){for(var e=Of(this),r=yf(arguments.length,1),n=e.entries,o=hf(t),i=r<2?void 0:arguments[1],a=void 0===i?i:hf(i),u=0;u<n.length;){var s=n[u];if(s.key!==o||void 0!==a&&s.value!==a)u++;else if(Df(n,u,1),void 0!==a)break}Qc||(this.size=n.length),e.updateURL()},get:function(t){var e=Of(this).entries;yf(arguments.length,1);for(var r=hf(t),n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){var e=Of(this).entries;yf(arguments.length,1);for(var r=hf(t),n=[],o=0;o<e.length;o++)e[o].key===r&&Hf(n,e[o].value);return n},has:function(t){for(var e=Of(this).entries,r=yf(arguments.length,1),n=hf(t),o=r<2?void 0:arguments[1],i=void 0===o?o:hf(o),a=0;a<e.length;){var u=e[a++];if(u.key===n&&(void 0===i||u.value===i))return!0}return!1},set:function(t,e){var r=Of(this);yf(arguments.length,1);for(var n,o=r.entries,i=!1,a=hf(t),u=hf(e),s=0;s<o.length;s++)(n=o[s]).key===a&&(i?Df(o,s--,1):(i=!0,n.value=u));i||Hf(o,{key:a,value:u}),Qc||(this.size=o.length),r.updateURL()},sort:function(){var t=Of(this);mf(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,r=Of(this).entries,n=sf(t,arguments.length>1?arguments[1]:void 0),o=0;o<r.length;)n((e=r[o++]).value,e.key,this)},keys:function(){return new Zf(this,"keys")},values:function(){return new Zf(this,"values")},entries:function(){return new Zf(this,"entries")}},{enumerable:!0}),Xc(rl,bf,rl.entries,{name:"entries"}),Xc(rl,"toString",(function(){return Of(this).serialize()}),{enumerable:!0}),Qc&&Zc(rl,"size",{get:function(){return Of(this).entries.length},configurable:!0,enumerable:!0}),ef(el,wf),Vc({global:!0,constructor:!0,forced:!Jc},{URLSearchParams:el}),!Jc&&af(kf)){var nl=Kc(If.has),ol=Kc(If.set),il=function(t){if(lf(t)){var e,r=t.body;if(cf(r)===wf)return e=t.headers?new kf(t.headers):new kf,nl(e,"content-type")||ol(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),pf(t,{body:vf(0,hf(r)),headers:vf(0,e)})}return t};if(af(jf)&&Vc({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return jf(t,arguments.length>1?il(arguments[1]):{})}}),af(Ef)){var al=function(t){return of(this,Af),new Ef(t,arguments.length>1?il(arguments[1]):{})};Af.constructor=al,al.prototype=Af,Vc({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:al})}}var ul={URLSearchParams:el,getState:Of},sl=Fr,cl=Et("iterator"),fl=Array.prototype,ll=function(t){return void 0!==t&&(sl.Array===t||fl[cl]===t)},hl=Dt,pl=Tt,vl=ae,gl=function(t,e,r){var n,o;pl(t);try{if(!(n=vl(t,"return"))){if("throw"===e)throw r;return r}n=hl(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return pl(n),r},dl=gc,yl=Dt,ml=Tt,bl=Zt,wl=ll,Sl=$e,Pl=Vt,Ol=Ec,Rl=Sc,xl=gl,Ll=TypeError,jl=function(t,e){this.stopped=t,this.result=e},El=jl.prototype,kl=Et("iterator"),Al=!1;try{var Il=0,Tl={next:function(){return{done:!!Il++}},return:function(){Al=!0}};Tl[kl]=function(){return this},Array.from(Tl,(function(){throw 2}))}catch(t){}var Ul="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Cl="undefined"!=typeof process&&"process"==j(process),Ml=!Ul&&!Cl&&"object"==typeof window&&"object"==typeof document,_l=r,Bl=ds,Hl=a,Fl=jo,ql=Tn,Dl=Et,Nl=Ml,zl=Ul,$l=pt;Bl&&Bl.prototype;var Gl=Dl("species"),Vl=!1,Wl=Hl(_l.PromiseRejectionEvent),Yl=Fl("Promise",(function(){var t=ql(Bl),e=t!==String(Bl);if(!e&&66===$l)return!0;if(!$l||$l<51||!/native code/.test(t)){var r=new Bl((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Gl]=n,!(Vl=r.then((function(){}))instanceof n))return!0}return!e&&(Nl||zl)&&!Wl})),Kl=ds,Ql=function(t,e){if(!e&&!Al)return!1;var r=!1;try{var n={};n[kl]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Jl={CONSTRUCTOR:Yl,REJECTION_EVENT:Wl,SUBCLASSING:Vl}.CONSTRUCTOR||!Ql((function(t){Kl.all(t).then(void 0,(function(){}))})),Xl=Dt,Zl=ne,th=Hs,eh=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},rh=function(t,e,r){var n,o,i,a,u,s,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),v=!(!r||!r.INTERRUPTED),g=dl(e,f),d=function(t){return n&&xl(n,"normal",t),new jl(!0,t)},y=function(t){return l?(ml(t),v?g(t[0],t[1],d):g(t[0],t[1])):v?g(t,d):g(t)};if(h)n=t.iterator;else if(p)n=t;else{if(!(o=Rl(t)))throw Ll(bl(t)+" is not iterable");if(wl(o)){for(i=0,a=Sl(t);a>i;i++)if((u=y(t[i]))&&Pl(El,u))return u;return new jl(!1)}n=Ol(t,o)}for(s=h?t.next:n.next;!(c=yl(s,n)).done;){try{u=y(c.value)}catch(t){xl(n,"throw",t)}if("object"==typeof u&&u&&Pl(El,u))return u}return new jl(!1)};Mo({target:"Promise",stat:!0,forced:Jl},{allSettled:function(t){var e=this,r=th.f(e),n=r.resolve,o=r.reject,i=eh((function(){var r=Zl(e.resolve),o=[],i=0,a=1;rh(t,(function(t){var u=i++,s=!1;a++,Xl(r,e,t).then((function(t){s||(s=!0,o[u]={status:"fulfilled",value:t},--a||n(o))}),(function(t){s||(s=!0,o[u]={status:"rejected",reason:t},--a||n(o))}))})),--a||n(o)}));return i.error&&o(i.value),r.promise}});var nh=c,oh=j,ih=Et("match"),ah=Dt,uh=et,sh=Vt,ch=Aa,fh=RegExp.prototype,lh=Mo,hh=Dt,ph=O,vh=_,gh=a,dh=U,yh=function(t){var e;return nh(t)&&(void 0!==(e=t[ih])?!!e:"RegExp"==oh(t))},mh=Ea,bh=ae,wh=function(t){var e=t.flags;return void 0!==e||"flags"in fh||uh(t,"flags")||!sh(fh,t)?e:ah(ch,t)},Sh=Hu,Ph=Et("replace"),Oh=TypeError,Rh=ph("".indexOf);ph("".replace);var xh=ph("".slice),Lh=Math.max,jh=function(t,e,r){return r>t.length?-1:""===e?r:Rh(t,e,r)};lh({target:"String",proto:!0},{replaceAll:function(t,e){var r,n,o,i,a,u,s,c,f=vh(this),l=0,h=0,p="";if(!dh(t)){if(yh(t)&&(r=mh(vh(wh(t))),!~Rh(r,"g")))throw Oh("`.replaceAll` does not allow non-global regexes");if(n=bh(t,Ph))return hh(n,t,f,e)}for(o=mh(f),i=mh(t),(a=gh(e))||(e=mh(e)),u=i.length,s=Lh(1,u),l=jh(o,i,0);-1!==l;)c=a?mh(e(i,l,o)):Sh(i,o,l,[],void 0,e),p+=xh(o,h,l)+c,h=l+u,l=jh(o,i,l+s);return h<o.length&&(p+=xh(o,h)),p}});var Eh=Eu.charAt,kh=Ea,Ah=un,Ih=Fi,Th=qi,Uh="String Iterator",Ch=Ah.set,Mh=Ah.getterFor(Uh);Ih(String,"String",(function(t){Ch(this,{type:Uh,string:kh(t),index:0})}),(function(){var t,e=Mh(this),r=e.string,n=e.index;return n>=r.length?Th(void 0,!0):(t=Eh(r,n),e.index+=t.length,Th(t,!1))}));var _h,Bh=Ct,Hh=O,Fh=Dt,qh=y,Dh=ar,Nh=oo,zh=cn,$h=X,Gh=T,Vh=Object.assign,Wh=Object.defineProperty,Yh=Hh([].concat),Kh=!Vh||qh((function(){if(Bh&&1!==Vh({b:1},Vh(Wh({},"a",{enumerable:!0,get:function(){Wh(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!=Vh({},t)[r]||Dh(Vh({},e)).join("")!=n}))?function(t,e){for(var r=$h(t),n=arguments.length,o=1,i=Nh.f,a=zh.f;n>o;)for(var u,s=Gh(arguments[o++]),c=i?Yh(Dh(s),i(s)):Dh(s),f=c.length,l=0;f>l;)u=c[l++],Bh&&!Fh(a,s,u)||(r[u]=s[u]);return r}:Vh,Qh=Tt,Jh=gl,Xh=gc,Zh=Dt,tp=X,ep=function(t,e,r,n){try{return n?e(Qh(r)[0],r[1]):e(r)}catch(e){Jh(t,"throw",e)}},rp=ll,np=As,op=$e,ip=Cc,ap=Ec,up=Sc,sp=Array,cp=O,fp=2147483647,lp=/[^\0-\u007E]/,hp=/[.\u3002\uFF0E\uFF61]/g,pp="Overflow: input needs wider integers to process",vp=RangeError,gp=cp(hp.exec),dp=Math.floor,yp=String.fromCharCode,mp=cp("".charCodeAt),bp=cp([].join),wp=cp([].push),Sp=cp("".replace),Pp=cp("".split),Op=cp("".toLowerCase),Rp=function(t){return t+22+75*(t<26)},xp=function(t,e,r){var n=0;for(t=r?dp(t/700):t>>1,t+=dp(t/e);t>455;)t=dp(t/35),n+=36;return dp(n+36*t/(t+38))},Lp=function(t){var e=[];t=function(t){for(var e=[],r=0,n=t.length;r<n;){var o=mp(t,r++);if(o>=55296&&o<=56319&&r<n){var i=mp(t,r++);56320==(64512&i)?wp(e,((1023&o)<<10)+(1023&i)+65536):(wp(e,o),r--)}else wp(e,o)}return e}(t);var r,n,o=t.length,i=128,a=0,u=72;for(r=0;r<t.length;r++)(n=t[r])<128&&wp(e,yp(n));var s=e.length,c=s;for(s&&wp(e,"-");c<o;){var f=fp;for(r=0;r<t.length;r++)(n=t[r])>=i&&n<f&&(f=n);var l=c+1;if(f-i>dp((fp-a)/l))throw vp(pp);for(a+=(f-i)*l,i=f,r=0;r<t.length;r++){if((n=t[r])<i&&++a>fp)throw vp(pp);if(n==i){for(var h=a,p=36;;){var v=p<=u?1:p>=u+26?26:p-u;if(h<v)break;var g=h-v,d=36-v;wp(e,yp(Rp(v+g%d))),h=dp(g/d),p+=36}wp(e,yp(Rp(h))),u=xp(a,l,c==s),a=0,c++}}a++,i++}return bp(e,"")},jp=Mo,Ep=Ct,kp=oc,Ap=r,Ip=gc,Tp=O,Up=to,Cp=uc,Mp=lc,_p=et,Bp=Kh,Hp=function(t){var e=tp(t),r=np(this),n=arguments.length,o=n>1?arguments[1]:void 0,i=void 0!==o;i&&(o=Xh(o,n>2?arguments[2]:void 0));var a,u,s,c,f,l,h=up(e),p=0;if(!h||this===sp&&rp(h))for(a=op(e),u=r?new this(a):sp(a);a>p;p++)l=i?o(e[p],p):e[p],ip(u,p,l);else for(f=(c=ap(e,h)).next,u=r?new this:[];!(s=Zh(f,c)).done;p++)l=i?ep(c,o,[s.value,p],!0):s.value,ip(u,p,l);return u.length=p,u},Fp=qc,qp=Eu.codeAt,Dp=function(t){var e,r,n=[],o=Pp(Sp(Op(t),hp,"."),".");for(e=0;e<o.length;e++)r=o[e],wp(n,gp(lp,r)?"xn--"+Lp(r):r);return bp(n,".")},Np=Ea,zp=ni,$p=Ac,Gp=ul,Vp=un,Wp=Vp.set,Yp=Vp.getterFor("URL"),Kp=Gp.URLSearchParams,Qp=Gp.getState,Jp=Ap.URL,Xp=Ap.TypeError,Zp=Ap.parseInt,tv=Math.floor,ev=Math.pow,rv=Tp("".charAt),nv=Tp(/./.exec),ov=Tp([].join),iv=Tp(1..toString),av=Tp([].pop),uv=Tp([].push),sv=Tp("".replace),cv=Tp([].shift),fv=Tp("".split),lv=Tp("".slice),hv=Tp("".toLowerCase),pv=Tp([].unshift),vv="Invalid scheme",gv="Invalid host",dv="Invalid port",yv=/[a-z]/i,mv=/[\d+-.a-z]/i,bv=/\d/,wv=/^0x/i,Sv=/^[0-7]+$/,Pv=/^\d+$/,Ov=/^[\da-f]+$/i,Rv=/[\0\t\n\r #%/:<>?@[\\\]^|]/,xv=/[\0\t\n\r #/:<>?@[\\\]^|]/,Lv=/^[\u0000-\u0020]+/,jv=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Ev=/[\t\n\r]/g,kv=function(t){var e,r,n,o;if("number"==typeof t){for(e=[],r=0;r<4;r++)pv(e,t%256),t=tv(t/256);return ov(e,".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,r=1,n=null,o=0,i=0;i<8;i++)0!==t[i]?(o>r&&(e=n,r=o),n=null,o=0):(null===n&&(n=i),++o);return o>r&&(e=n,r=o),e}(t),r=0;r<8;r++)o&&0===t[r]||(o&&(o=!1),n===r?(e+=r?":":"::",o=!0):(e+=iv(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},Av={},Iv=Bp({},Av,{" ":1,'"':1,"<":1,">":1,"`":1}),Tv=Bp({},Iv,{"#":1,"?":1,"{":1,"}":1}),Uv=Bp({},Tv,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Cv=function(t,e){var r=qp(t,0);return r>32&&r<127&&!_p(e,t)?t:encodeURIComponent(t)},Mv={ftp:21,file:null,http:80,https:443,ws:80,wss:443},_v=function(t,e){var r;return 2==t.length&&nv(yv,rv(t,0))&&(":"==(r=rv(t,1))||!e&&"|"==r)},Bv=function(t){var e;return t.length>1&&_v(lv(t,0,2))&&(2==t.length||"/"===(e=rv(t,2))||"\\"===e||"?"===e||"#"===e)},Hv=function(t){return"."===t||"%2e"===hv(t)},Fv={},qv={},Dv={},Nv={},zv={},$v={},Gv={},Vv={},Wv={},Yv={},Kv={},Qv={},Jv={},Xv={},Zv={},tg={},eg={},rg={},ng={},og={},ig={},ag=function(t,e,r){var n,o,i,a=Np(t);if(e){if(o=this.parse(a))throw Xp(o);this.searchParams=null}else{if(void 0!==r&&(n=new ag(r,!0)),o=this.parse(a,null,n))throw Xp(o);(i=Qp(new Kp)).bindURL(this),this.searchParams=i}};ag.prototype={type:"URL",parse:function(t,e,r){var n,o,i,a,u,s=this,c=e||Fv,f=0,l="",h=!1,p=!1,v=!1;for(t=Np(t),e||(s.scheme="",s.username="",s.password="",s.host=null,s.port=null,s.path=[],s.query=null,s.fragment=null,s.cannotBeABaseURL=!1,t=sv(t,Lv,""),t=sv(t,jv,"$1")),t=sv(t,Ev,""),n=Hp(t);f<=n.length;){switch(o=n[f],c){case Fv:if(!o||!nv(yv,o)){if(e)return vv;c=Dv;continue}l+=hv(o),c=qv;break;case qv:if(o&&(nv(mv,o)||"+"==o||"-"==o||"."==o))l+=hv(o);else{if(":"!=o){if(e)return vv;l="",c=Dv,f=0;continue}if(e&&(s.isSpecial()!=_p(Mv,l)||"file"==l&&(s.includesCredentials()||null!==s.port)||"file"==s.scheme&&!s.host))return;if(s.scheme=l,e)return void(s.isSpecial()&&Mv[s.scheme]==s.port&&(s.port=null));l="","file"==s.scheme?c=Xv:s.isSpecial()&&r&&r.scheme==s.scheme?c=Nv:s.isSpecial()?c=Vv:"/"==n[f+1]?(c=zv,f++):(s.cannotBeABaseURL=!0,uv(s.path,""),c=ng)}break;case Dv:if(!r||r.cannotBeABaseURL&&"#"!=o)return vv;if(r.cannotBeABaseURL&&"#"==o){s.scheme=r.scheme,s.path=Fp(r.path),s.query=r.query,s.fragment="",s.cannotBeABaseURL=!0,c=ig;break}c="file"==r.scheme?Xv:$v;continue;case Nv:if("/"!=o||"/"!=n[f+1]){c=$v;continue}c=Wv,f++;break;case zv:if("/"==o){c=Yv;break}c=rg;continue;case $v:if(s.scheme=r.scheme,o==_h)s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=Fp(r.path),s.query=r.query;else if("/"==o||"\\"==o&&s.isSpecial())c=Gv;else if("?"==o)s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=Fp(r.path),s.query="",c=og;else{if("#"!=o){s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=Fp(r.path),s.path.length--,c=rg;continue}s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=Fp(r.path),s.query=r.query,s.fragment="",c=ig}break;case Gv:if(!s.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,c=rg;continue}c=Yv}else c=Wv;break;case Vv:if(c=Wv,"/"!=o||"/"!=rv(l,f+1))continue;f++;break;case Wv:if("/"!=o&&"\\"!=o){c=Yv;continue}break;case Yv:if("@"==o){h&&(l="%40"+l),h=!0,i=Hp(l);for(var g=0;g<i.length;g++){var d=i[g];if(":"!=d||v){var y=Cv(d,Uv);v?s.password+=y:s.username+=y}else v=!0}l=""}else if(o==_h||"/"==o||"?"==o||"#"==o||"\\"==o&&s.isSpecial()){if(h&&""==l)return"Invalid authority";f-=Hp(l).length+1,l="",c=Kv}else l+=o;break;case Kv:case Qv:if(e&&"file"==s.scheme){c=tg;continue}if(":"!=o||p){if(o==_h||"/"==o||"?"==o||"#"==o||"\\"==o&&s.isSpecial()){if(s.isSpecial()&&""==l)return gv;if(e&&""==l&&(s.includesCredentials()||null!==s.port))return;if(a=s.parseHost(l))return a;if(l="",c=eg,e)return;continue}"["==o?p=!0:"]"==o&&(p=!1),l+=o}else{if(""==l)return gv;if(a=s.parseHost(l))return a;if(l="",c=Jv,e==Qv)return}break;case Jv:if(!nv(bv,o)){if(o==_h||"/"==o||"?"==o||"#"==o||"\\"==o&&s.isSpecial()||e){if(""!=l){var m=Zp(l,10);if(m>65535)return dv;s.port=s.isSpecial()&&m===Mv[s.scheme]?null:m,l=""}if(e)return;c=eg;continue}return dv}l+=o;break;case Xv:if(s.scheme="file","/"==o||"\\"==o)c=Zv;else{if(!r||"file"!=r.scheme){c=rg;continue}if(o==_h)s.host=r.host,s.path=Fp(r.path),s.query=r.query;else if("?"==o)s.host=r.host,s.path=Fp(r.path),s.query="",c=og;else{if("#"!=o){Bv(ov(Fp(n,f),""))||(s.host=r.host,s.path=Fp(r.path),s.shortenPath()),c=rg;continue}s.host=r.host,s.path=Fp(r.path),s.query=r.query,s.fragment="",c=ig}}break;case Zv:if("/"==o||"\\"==o){c=tg;break}r&&"file"==r.scheme&&!Bv(ov(Fp(n,f),""))&&(_v(r.path[0],!0)?uv(s.path,r.path[0]):s.host=r.host),c=rg;continue;case tg:if(o==_h||"/"==o||"\\"==o||"?"==o||"#"==o){if(!e&&_v(l))c=rg;else if(""==l){if(s.host="",e)return;c=eg}else{if(a=s.parseHost(l))return a;if("localhost"==s.host&&(s.host=""),e)return;l="",c=eg}continue}l+=o;break;case eg:if(s.isSpecial()){if(c=rg,"/"!=o&&"\\"!=o)continue}else if(e||"?"!=o)if(e||"#"!=o){if(o!=_h&&(c=rg,"/"!=o))continue}else s.fragment="",c=ig;else s.query="",c=og;break;case rg:if(o==_h||"/"==o||"\\"==o&&s.isSpecial()||!e&&("?"==o||"#"==o)){if(".."===(u=hv(u=l))||"%2e."===u||".%2e"===u||"%2e%2e"===u?(s.shortenPath(),"/"==o||"\\"==o&&s.isSpecial()||uv(s.path,"")):Hv(l)?"/"==o||"\\"==o&&s.isSpecial()||uv(s.path,""):("file"==s.scheme&&!s.path.length&&_v(l)&&(s.host&&(s.host=""),l=rv(l,0)+":"),uv(s.path,l)),l="","file"==s.scheme&&(o==_h||"?"==o||"#"==o))for(;s.path.length>1&&""===s.path[0];)cv(s.path);"?"==o?(s.query="",c=og):"#"==o&&(s.fragment="",c=ig)}else l+=Cv(o,Tv);break;case ng:"?"==o?(s.query="",c=og):"#"==o?(s.fragment="",c=ig):o!=_h&&(s.path[0]+=Cv(o,Av));break;case og:e||"#"!=o?o!=_h&&("'"==o&&s.isSpecial()?s.query+="%27":s.query+="#"==o?"%23":Cv(o,Av)):(s.fragment="",c=ig);break;case ig:o!=_h&&(s.fragment+=Cv(o,Iv))}f++}},parseHost:function(t){var e,r,n;if("["==rv(t,0)){if("]"!=rv(t,t.length-1))return gv;if(e=function(t){var e,r,n,o,i,a,u,s=[0,0,0,0,0,0,0,0],c=0,f=null,l=0,h=function(){return rv(t,l)};if(":"==h()){if(":"!=rv(t,1))return;l+=2,f=++c}for(;h();){if(8==c)return;if(":"!=h()){for(e=r=0;r<4&&nv(Ov,h());)e=16*e+Zp(h(),16),l++,r++;if("."==h()){if(0==r)return;if(l-=r,c>6)return;for(n=0;h();){if(o=null,n>0){if(!("."==h()&&n<4))return;l++}if(!nv(bv,h()))return;for(;nv(bv,h());){if(i=Zp(h(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;l++}s[c]=256*s[c]+o,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==h()){if(l++,!h())return}else if(h())return;s[c++]=e}else{if(null!==f)return;l++,f=++c}}if(null!==f)for(a=c-f,c=7;0!=c&&a>0;)u=s[c],s[c--]=s[f+a-1],s[f+--a]=u;else if(8!=c)return;return s}(lv(t,1,-1)),!e)return gv;this.host=e}else if(this.isSpecial()){if(t=Dp(t),nv(Rv,t))return gv;if(e=function(t){var e,r,n,o,i,a,u,s=fv(t,".");if(s.length&&""==s[s.length-1]&&s.length--,(e=s.length)>4)return t;for(r=[],n=0;n<e;n++){if(""==(o=s[n]))return t;if(i=10,o.length>1&&"0"==rv(o,0)&&(i=nv(wv,o)?16:8,o=lv(o,8==i?1:2)),""===o)a=0;else{if(!nv(10==i?Pv:8==i?Sv:Ov,o))return t;a=Zp(o,i)}uv(r,a)}for(n=0;n<e;n++)if(a=r[n],n==e-1){if(a>=ev(256,5-e))return null}else if(a>255)return null;for(u=av(r),n=0;n<r.length;n++)u+=r[n]*ev(256,3-n);return u}(t),null===e)return gv;this.host=e}else{if(nv(xv,t))return gv;for(e="",r=Hp(t),n=0;n<r.length;n++)e+=Cv(r[n],Av);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return _p(Mv,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&_v(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,n=t.password,o=t.host,i=t.port,a=t.path,u=t.query,s=t.fragment,c=e+":";return null!==o?(c+="//",t.includesCredentials()&&(c+=r+(n?":"+n:"")+"@"),c+=kv(o),null!==i&&(c+=":"+i)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+ov(a,"/"):"",null!==u&&(c+="?"+u),null!==s&&(c+="#"+s),c},setHref:function(t){var e=this.parse(t);if(e)throw Xp(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new ug(t.path[0]).origin}catch(t){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+kv(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(Np(t)+":",Fv)},getUsername:function(){return this.username},setUsername:function(t){var e=Hp(Np(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=Cv(e[r],Uv)}},getPassword:function(){return this.password},setPassword:function(t){var e=Hp(Np(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=Cv(e[r],Uv)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?kv(t):kv(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Kv)},getHostname:function(){var t=this.host;return null===t?"":kv(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Qv)},getPort:function(){var t=this.port;return null===t?"":Np(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""==(t=Np(t))?this.port=null:this.parse(t,Jv))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+ov(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,eg))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""==(t=Np(t))?this.query=null:("?"==rv(t,0)&&(t=lv(t,1)),this.query="",this.parse(t,og)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!=(t=Np(t))?("#"==rv(t,0)&&(t=lv(t,1)),this.fragment="",this.parse(t,ig)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var ug=function(t){var e=Mp(this,sg),r=$p(arguments.length,1)>1?arguments[1]:void 0,n=Wp(e,new ag(t,!1,r));Ep||(e.href=n.serialize(),e.origin=n.getOrigin(),e.protocol=n.getProtocol(),e.username=n.getUsername(),e.password=n.getPassword(),e.host=n.getHost(),e.hostname=n.getHostname(),e.port=n.getPort(),e.pathname=n.getPathname(),e.search=n.getSearch(),e.searchParams=n.getSearchParams(),e.hash=n.getHash())},sg=ug.prototype,cg=function(t,e){return{get:function(){return Yp(this)[t]()},set:e&&function(t){return Yp(this)[e](t)},configurable:!0,enumerable:!0}};if(Ep&&(Cp(sg,"href",cg("serialize","setHref")),Cp(sg,"origin",cg("getOrigin")),Cp(sg,"protocol",cg("getProtocol","setProtocol")),Cp(sg,"username",cg("getUsername","setUsername")),Cp(sg,"password",cg("getPassword","setPassword")),Cp(sg,"host",cg("getHost","setHost")),Cp(sg,"hostname",cg("getHostname","setHostname")),Cp(sg,"port",cg("getPort","setPort")),Cp(sg,"pathname",cg("getPathname","setPathname")),Cp(sg,"search",cg("getSearch","setSearch")),Cp(sg,"searchParams",cg("getSearchParams")),Cp(sg,"hash",cg("getHash","setHash"))),Up(sg,"toJSON",(function(){return Yp(this).serialize()}),{enumerable:!0}),Up(sg,"toString",(function(){return Yp(this).serialize()}),{enumerable:!0}),Jp){var fg=Jp.createObjectURL,lg=Jp.revokeObjectURL;fg&&Up(ug,"createObjectURL",Ip(fg,Jp)),lg&&Up(ug,"revokeObjectURL",Ip(lg,Jp))}zp(ug,"URL"),jp({global:!0,constructor:!0,forced:!kp,sham:!Ep},{URL:ug})}();
!function(e){"use strict";function t(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{a(s.next(e))}catch(e){n(e)}}function d(e){try{a(s.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,d)}a((s=s.apply(e,t||[])).next())}))}class i{constructor(e,t,s){this.channelId=e,this.platformId=t,this.remoteUrl=null!=s?s:i.DEFAULT_REMOTE_ADS_CONFIG_URL}get(e){return t(this,void 0,void 0,(function*(){if(!(e&&this.platformId&&this.channelId))throw new Error("gameId, platformId and channelId are required to retrieve remote ads config");const t=yield fetch(this.getRemoteConfigUrl(e));if(!t.ok)throw new Error(t.statusText);return yield t.json()}))}getRemoteConfigUrl(e){return this.remoteUrl.replace("{GAME}",e).replace("{PLATFORM}",this.platformId).replace("{CHANNEL}",this.channelId)}}i.DEFAULT_REMOTE_ADS_CONFIG_URL="https://fran-cdn.frvr.com/configs/ads/{GAME}/{PLATFORM}/{CHANNEL}/sdk.json";class s{constructor(){this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}class o{static isFrame(){return window.self!==window.top}static getBrowserWidth(){var e;let t;const i=o.isFrame()?window:window.top||window,s=i.outerWidth||9999;return t=void 0!==i.innerWidth?i.innerWidth:void 0!==i.document.documentElement&&void 0!==i.document.documentElement.clientWidth&&0!==i.document.documentElement.clientWidth?i.document.documentElement.clientWidth:null===(e=i.document.body)||void 0===e?void 0:e.clientWidth,Math.min(t,s)}static getBrowserHeight(){var e;let t;const i=o.isFrame()?window:window.top||window,s=i.outerHeight||9999;return t=void 0!==i.innerHeight?i.innerHeight:void 0!==i.document.documentElement&&void 0!==i.document.documentElement.clientHeight&&0!==i.document.documentElement.clientHeight?i.document.documentElement.clientHeight:null===(e=i.document.body)||void 0===e?void 0:e.clientHeight,Math.min(t,s)}static isInterstitial(e){return e.ortb2Imp&&e.ortb2Imp.instl&&1===e.ortb2Imp.instl}static filterAdUnitSizes(e,t,i,s){const n=t.mediaTypes||{},r=o.isInterstitial(t);i=i||o.getBrowserWidth(),s=s||o.getBrowserHeight(),n.banner&&(Array.isArray(n.banner.sizes)&&n.banner.sizes.length>0||(n.banner.sizes=e.banner),r&&(i*=.9,s*=.9),n.banner.sizes=o.filterSizesArray(n.banner.sizes,i,s)),n.video&&(n.video.playerSize&&Array.isArray(n.video.playerSize)&&n.video.playerSize.length>0||(n.video.playerSize=o.filterSizesArray(e.video,i,s)[0]))}static generateUUID(){if(window.crypto&&window.crypto.randomUUID)return window.crypto.randomUUID();let e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){let s=16*Math.random();return e>0?(s=(e+s)%16|0,e=Math.floor(e/16)):(s=(t+s)%16|0,t=Math.floor(t/16)),("x"===i?s:3&s|8).toString(16)}))}static loadScript(e){if(e){const t=document.createElement("script");return t.type="text/javascript",t.async=!0,t.src=e,document.head.appendChild(t)}}static overridePollfishContainerZIndex(e){const t=document.getElementById("pollfishSurveyContainer");t&&(t.style["z-index"]=e)}static loadGPT(e){if(!o.gptLoaded){if(window.googletag&&window.googletag.apiReady)return;let t=o.DEFAULT_GPT_URL;e&&e.url&&(t=e.url),o.loadScript(t),o.gptLoaded=!0}}static loadPrebid(e){if(!o.prebidLoaded){let t=o.DEFAULT_PREBID_URL;e&&e.url&&(t=e.url),o.loadScript(t),o.prebidLoaded=!0}}static loadPollfish(e){if(!o.pollfishLoaded){let t=o.DEFAULT_JQUERY_URL,i=o.DEFAULT_POLLFISH_SDK_URL;e&&(e.jqueryUrl&&(t=e.jqueryUrl),e.pollfishSdkUrl&&(i=e.pollfishSdkUrl)),o.loadScript(t).onload=function(){o.loadScript(i)},window.pollfishConfig=Object.assign(Object.assign({},window.pollfishConfig||{}),{api_key:e.apiKey,debug:!!e.debug}),o.pollfishLoaded=!0}}static loadIMA(e){if(!o.imaLoaded){let t=o.DEFAULT_IMA_URL;e&&e.url&&(t=e.url);const i=o.loadScript(t);i.onerror=e=>{o.imaReady.reject(e)},i.onload=()=>{o.imaReady.resolve()},o.imaLoaded=!0}}static loadApsTag(e){!o.apsTagLoaded&&e&&e.pubID&&(!function(t,i,s,o,n,r,d){function a(e,s){i[t]._Q.push([e,s])}i[t]||(i[t]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(r=s.createElement(o)).async=!0,r.src="//c.amazon-adsystem.com/aax2/apstag.js",(d=s.getElementsByTagName(o)[0]).parentNode.insertBefore(r,d),i[t].init({pubID:e.pubID,adServer:"googletag",videoAdServer:"DFP"}))}("apstag",window,document,"script"),o.apsTagLoaded=!0)}static onIMAReady(){return this.imaReady.promise}static initializePrebid(e){const t=(e=e||{}).config||{},i=e.analytics||{},s=o.getPrebidS2SAliases(null==t?void 0:t.s2sConfig);s&&s.length&&window.pbjs.que.push((()=>{s.forEach((e=>{var t;null===(t=window.pbjs)||void 0===t||t.aliasBidder(e.bidder,e.alias)}))})),window.pbjs.que.push((()=>{o.prebidInitialized||(i&&i.enabled&&window.pbjs.que.push((()=>{window.pbjs.enableAnalytics({provider:i.provider,options:i.options})})),window.pbjs.setConfig(t),o.prebidInitialized=!0)}))}static setPrebidPageUrl(e){e&&window.pbjs&&window.pbjs.que&&window.pbjs.que.push((()=>{window.pbjs.setConfig({pageUrl:e})}))}static addPrebidAdUnit(e){window.pbjs.que.push((()=>{window.pbjs.addAdUnits(e)}))}static stringToHTMLElement(e){const t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}static isIMAPresent(){return window.google&&window.google.ima}static toUrlQueryParameters(e){const t=[];for(const i in e)({}).hasOwnProperty.call(e,i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}static extractParamsFromUrl(e){const t=e.split("?");return 2===t.length?o.parseParameters(t[1]):{}}static parseParameters(e){return function(e){const t={};return e.replace(/([^=&]+)=([^&]*)/g,(function(e,i,s){const o=decodeURIComponent(s);o&&"undefined"!==o&&(t[decodeURIComponent(i)]=decodeURIComponent(s))})),t}(e)}static isHTMLElementInViewport(e){var t,i;if(!e)return!1;if(window){const s=e.getBoundingClientRect(),o=window.innerHeight||(null===(t=window.document.documentElement)||void 0===t?void 0:t.clientHeight),n=window.innerWidth||(null===(i=window.document.documentElement)||void 0===i?void 0:i.clientWidth),r=s.top<=o&&s.top+s.height>=0,d=s.left<=n&&s.left+s.width>=0;return s.bottom>0&&s.right>0&&r&&d}return!1}static isHTMLElementVisible(e){return!!e&&(!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&o.isHTMLElementInViewport(e))}static isTabVisible(){var e;return"hidden"!==(null===(e=null===window||void 0===window?void 0:window.document)||void 0===e?void 0:e.visibilityState)}static isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}static toUAMAdUnit(e){var t,i,s,n;const r=o.isFunction(e.code)?e.code():e.code;return{slotName:r,slotID:r,sizes:(null===(i=null===(t=e.mediaTypes)||void 0===t?void 0:t.banner)||void 0===i?void 0:i.sizes)||[].concat(null===(n=null===(s=e.mediaTypes)||void 0===s?void 0:s.video)||void 0===n?void 0:n.playerSize)}}static mergeVendorConsents(e,t){null!=e||(e={}),null!=t||(t={});const i=Object.assign(Object.assign({},e),t);return Object.keys(i).forEach((s=>{i[s]=!!e[s]||!!t[s]})),i}static adUnitPath2NetworkAndCode(e){const t=(e||"").split("/").filter(Boolean);return t.length>=2?{network:t[0],code:t[t.length-1]}:null}static getPrebidS2SAliases(e){let t=[];return e&&e.length&&e.forEach((e=>{var i;if(e.enabled&&(null===(i=e.extPrebid)||void 0===i?void 0:i.aliases)){const i=Object.keys(e.extPrebid.aliases).map((t=>({bidder:e.extPrebid.aliases[t],alias:t})));t=t.concat(i)}})),t}static filterSizesArray(e,t,i){const s=[];return e.forEach((e=>{e[0]<=t&&e[1]<=i&&s.push(e)})),s}}var n,r;o.imaReady=new s,o.GOOGLE_VENDOR_ID=755,o.TCF_P1_CONSENT=1,o.TCF_P4_CONSENT=4,o.DEFAULT_GPT_URL="https://securepubads.g.doubleclick.net/tag/js/gpt.js",o.DEFAULT_PREBID_URL="https://fran-cdn.frvr.com/prebid.7.23.0.js",o.DEFAULT_IMA_URL="patch/google/ima3.js?imasdk.googleapis.com/js/sdkloader/ima3.js",o.DEFAULT_JQUERY_URL="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js",o.DEFAULT_POLLFISH_SDK_URL="https://storage.googleapis.com/pollfish_production/sdk/webplugin/pollfish.min.js",o.prebidLoaded=!1,o.prebidInitialized=!1,o.gptLoaded=!1,o.imaLoaded=!1,o.apsTagLoaded=!1,o.pollfishLoaded=!1,function(e){e.INTERSTITIAL="interstitial",e.REWARD="reward",e.BANNER="banner",e.SURVEY="survey",e.REWARDED_INTERSTITIAL="rewarded-interstitial"}(n||(n={})),n.INTERSTITIAL,n.REWARD,n.BANNER,n.SURVEY,n.REWARDED_INTERSTITIAL,function(e){e.DEVELOPMENT="dev",e.BETA="beta",e.PRODUCTION="prod"}(r||(r={}));const d={log:()=>{},error:()=>{},warn:()=>{},info:()=>{},debug:()=>{}};class a{constructor(){this.values={}}setItems(e){return t(this,void 0,void 0,(function*(){for(const t of e)this.values[t.key]=t.value}))}getItems(e){return t(this,void 0,void 0,(function*(){const t={};for(const i of e){const e=this.values[i];void 0!==e&&(t[i]=e)}return t}))}removeItems(e){return t(this,void 0,void 0,(function*(){for(const t of e)delete this.values[t]}))}isPersistent(){return!1}}var l;a.providerName="memory",new class{constructor({provider:e,logger:t}){this.provider=e,this.logger=t||d}setItems(e){const t=e.map((({key:e,value:t})=>({key:e,value:JSON.stringify(t)})));return this.provider.setItems(t)}getItems(e){return t(this,void 0,void 0,(function*(){const t=yield this.provider.getItems(e),i={};for(const e in t)try{i[e]=JSON.parse(t[e])}catch(s){i[e]=t[e],this.logger.error(`[storage] parsing error on key ${e}`,s.message)}return i}))}removeItems(e){return this.provider.removeItems(e)}setItem(e,t){return this.provider.setItems([{key:e,value:JSON.stringify(t)}])}getItem(e,i){return t(this,void 0,void 0,(function*(){let t;const s=(yield this.provider.getItems([e]))[e];try{t=void 0!==s?JSON.parse(s):i}catch(o){t=null!=i?i:s,this.logger.error(`[storage] parsing error on key ${e}`,o.message)}return t}))}removeItem(e){return t(this,void 0,void 0,(function*(){return this.provider.removeItems([e])}))}isPersistent(){return this.provider.isPersistent()}}({provider:new a}),function(e){e[e.None=0]="None",e[e.P1StoreInformationOnADevice=2]="P1StoreInformationOnADevice",e[e.P2SelectBasicAds=4]="P2SelectBasicAds",e[e.P3PersonalizedAdsProfile=8]="P3PersonalizedAdsProfile",e[e.P4PersonalizedAds=16]="P4PersonalizedAds",e[e.P5PersonalizedContentProfile=32]="P5PersonalizedContentProfile",e[e.P6PersonalizedContent=64]="P6PersonalizedContent",e[e.P7MeasureAdPerformance=128]="P7MeasureAdPerformance",e[e.P8MeasureContentPerformance=256]="P8MeasureContentPerformance",e[e.P9MarketResearchForAudienceInsights=512]="P9MarketResearchForAudienceInsights",e[e.P10DevelopAndImproveProducts=1024]="P10DevelopAndImproveProducts",e[e.All=2046]="All"}(l||(l={}));const c={consentToTerms:()=>{},onConsentChanged(e){},hasConsentForAll:(e,t)=>!0,hasConsentForAny:(e,t)=>!0,consents:()=>l.All,legitimateInterests:()=>l.All,hasLoaded:()=>!0};var h,u,g,v,p,m,w,f;!function(e){e.AD_CLOSED="adclosed",e.AD_LEAVING_APPLICATION="adleavingapplication",e.CANCELED="canceled",e.ERROR="error",e.INTERNAL_ERROR="internalerror",e.INVALID_REQUEST="invalidrequest",e.NETWORK_ERROR="networkerror",e.NOFILL="nofill",e.SUCCESS="success",e.THROTTLED="throttled",e.TIMEOUT="timeout"}(h||(h={})),function(e){e.ERROR="error",e.NOFILL="nofill",e.SKIPPED="skipped",e.SUCCESS="success",e.TIMEDOUT="timedout"}(u||(u={})),n.INTERSTITIAL,n.REWARD,function(e){e.DELIVERED="delivered",e.COMPLETED="completed"}(g||(g={})),function(e){e.ON_LOAD="on_load",e.ON_SHOW="on_show",e.BLOCKED="blocked",e.NOFILL="nofill",e.TIMED_OUT="timed_out"}(v||(v={})),function(e){e[e.NO_THROTTLING=0]="NO_THROTTLING",e.INIT_TIME="INIT_TIME",e.FREQUENCY="FREQUENCY"}(p||(p={})),function(e){e.NOT_DISPLAYED="not_displayed",e.DELIVERED="delivered",e.COMPLETED="completed"}(m||(m={})),function(e){e.DISPLAY="display",e.VIDEO="video",e.SURVEY="survey"}(w||(w={})),function(e){e.IDFA="idfa",e.GAID="gaid",e.SAMSUNG="tifa"}(f||(f={}));class A{debug(...e){console.debug(JSON.stringify(e))}error(...e){console.error(JSON.stringify(e))}info(...e){console.info(JSON.stringify(e))}log(...e){console.log(JSON.stringify(e))}warn(...e){console.warn(JSON.stringify(e))}}window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[];class P{constructor(e,t,i){this.PROVIDER="fran",this.DEFAULT_REFRESH_INTERVAL=61e3,this.hasP1Consent=!0,this.hasP4Consent=!0,this.isInitialized=!1,this.isAdAvailable=!1,this.isPreloadingAd=!1,this.defaultSizes={banner:[[1024,768],[768,1024],[480,320],[336,280],[320,480],[300,600],[300,250],[250,250],[728,90]],video:[[1024,768],[768,1024],[640,480],[640,390],[640,360],[480,320],[400,300],[400,225],[390,640],[320,480]]},this.volume=1,this.defaultTimeoutMS=2500,this.preloadTimeout=null,this.type=e,this.mediaType=t,this.logger=i||new A}getName(){return this.PROVIDER+"#"+this.mediaType}getType(){return this.type}useManualControl(){return!1}init(e,i,s){var r,d,a,l,c,h,u;return t(this,void 0,void 0,(function*(){this.controls=i,this.tracker=s;const t=e.config;if(!(t.adUnit||t.adUnits&&Array.isArray(t.adUnits)&&0!==t.adUnits.length))throw null===(r=this.logger)||void 0===r||r.error(`${this.getFullName()}: adUnit or adUnits is required`),new Error(`${this.getFullName()}: adUnit or adUnits is required`);t.adUnit&&(null!==(d=(h=t.adUnit).timeout)&&void 0!==d||(h.timeout=(null===(l=null===(a=null===window||void 0===window?void 0:window.pbjs)||void 0===a?void 0:a.getConfig)||void 0===l?void 0:l.call(a,"bidderTimeout"))||this.defaultTimeoutMS),t.adUnit.code=o.isFunction(t.adUnit.code)?t.adUnit.code():t.adUnit.code,null!==(c=(u=t.adUnit).uam)&&void 0!==c||(u.uam=!!window.apstag)),t.adUnits&&t.adUnits.forEach((e=>e.code=o.isFunction(e.code)?e.code():e.code)),this.config=JSON.parse(JSON.stringify(t)),this.adUnit=t.adUnit,this.adUnits=this.config.adUnits,window.addEventListener("resize",(()=>{this.reset()})),this.adUnit&&this.type!=n.BANNER&&o.filterAdUnitSizes(this.defaultSizes,this.adUnit),this.isInitialized=!0}))}show(){var e,i;return t(this,void 0,void 0,(function*(){return this.isInitialized?this.isAdAvailable?{success:!0,code:g.COMPLETED}:(null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: no ad available`),{success:!1,code:v.ON_SHOW,message:`${this.getFullName()}: no ad available`}):(null===(e=this.logger)||void 0===e||e.error(`${this.getFullName()}: not initialized, call init()`),{success:!1,code:v.ON_SHOW,message:`${this.getFullName()}: not initialized, call init()`})}))}preload(){var e,i,s;return t(this,void 0,void 0,(function*(){return this.isInitialized?this.isAdAvailable?(null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: an ad is already available`),{success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: an ad is already available`}):(this.isPreloadingAd||(this.isAdAvailable=!1,this.isPreloadingAd=!0,setTimeout((()=>{this.isPreloadingAd&&this.reset()}),5e3),null===(s=this.logger)||void 0===s||s.debug(`${this.getFullName()}: preloading ad`)),{success:!0,code:g.DELIVERED}):(null===(e=this.logger)||void 0===e||e.error(`${this.getFullName()}: not initialized, call init()`),{success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: not initialized, call init()`})}))}reset(){this.isPreloadingAd=!1,this.isAdAvailable=!1}getFullName(){return this.getName()+"#"+this.getType()}getMediaType(){return this.mediaType}getUserP1Consent(){return this.hasP1Consent}setUserP1Consent(e){this.hasP1Consent=e}getUserP4Consent(){return this.hasP1Consent}setUserP4Consent(e){this.hasP4Consent=e}getVendorConsent(e){return!this.vendorConsents||this.vendorConsents[e]}setVendorConsents(e){this.vendorConsents=e}setDeviceId(e){this.deviceId=e}setPublisherProvidedId(e){this.ppid=e}getDeviceIdTargeting(){if(!this.deviceId)return null;const e={rdid:this.deviceId.value,is_lat:this.getUserP1Consent()?"0":"1"};switch(this.deviceId.type){case f.IDFA:return e.idtype="idfa",e;case f.GAID:return e.idtype="adid",e;case f.SAMSUNG:return e.idtype="tifa",e;default:return null}}getVolume(){return this.volume}setVolume(e){(e<0||e>1)&&(e=1),this.volume=e}getAdUnitCode(){return this.adUnit?o.isFunction(this.adUnit.code)?this.adUnit.code():this.adUnit.code:this.adUnits?this.adUnits.map((e=>e.code)).join(","):void 0}}class y extends P{constructor(e,t){super(e,w.DISPLAY,t),this.adPreloading=null,this.adSlot=null}init(e,i,s){const n=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){yield n.init.call(this,e,i,s),window.googletag.cmd.push((()=>{this.config.pageUrl&&window.googletag.pubads().set("page_url",this.config.pageUrl),window.googletag.pubads().addEventListener("slotRenderEnded",(e=>{var t,i,s,o;this.adSlot===e.slot&&(this.isAdAvailable=!e.isEmpty,this.isPreloadingAd=!1,this.isAdAvailable?(null===(t=this.logger)||void 0===t||t.debug(`${this.getFullName()}: ad filled`),null===(i=this.tracker)||void 0===i||i.receivedAdResponse(h.SUCCESS,this.getAdUnitCode(),this.getAdSlotTargeting())):(null===(s=this.logger)||void 0===s||s.debug(`${this.getFullName()}: unable to load ad`),null===(o=this.tracker)||void 0===o||o.receivedAdResponse(h.NOFILL,this.getAdUnitCode(),this.getAdSlotTargeting()),this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to load ad`}),this.adPreloading=null)))})),window.googletag.pubads().disableInitialLoad(),window.googletag.pubads().enableSingleRequest(),window.googletag.enableServices(),this.config.pageUrl&&o.setPrebidPageUrl(this.config.pageUrl)}))}))}reset(){super.reset(),this.adSlot&&window.googletag.destroySlots([this.adSlot]),this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to load ad`}),this.adPreloading=null)}isReady(){return o.gptLoaded}setTargeting(e){var t,i,s;this.adSlot&&((null===(t=this.config)||void 0===t?void 0:t.customTargeting)&&this.addAdSlotTargeting(this.config.customTargeting),this.deviceId&&this.addAdSlotTargeting(this.getDeviceIdTargeting()),this.ppid&&(null===(s=null===(i=null===window||void 0===window?void 0:window.googletag)||void 0===i?void 0:i.pubads)||void 0===s||s.call(i).setPublisherProvidedId(this.ppid)),e&&this.addAdSlotTargeting(e))}getAdSlotTargeting(){if(this.adSlot&&this.adSlot.getTargetingMap()){const e={},t=this.adSlot.getTargetingMap();for(const i in t)if({}.hasOwnProperty.call(t,i)){const s=t[i];e[i]=Array.isArray(s)?s.join():s}return e}return{}}addAdSlotTargeting(e){if(e&&"object"==typeof e&&this.adSlot&&this.adSlot.setTargeting)for(const t in e)e.hasOwnProperty(t)&&this.adSlot.setTargeting(t,e[t])}}class b extends y{constructor(e){super(n.INTERSTITIAL,e),this.adShownPromise=null,this.manualInterstitialEvent=null}init(e,i,s){const n=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){yield n.init.call(this,e,i,s),this.clearStorage(),window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("gameManualInterstitialSlotReady",(e=>{this.adSlot===e.slot&&(this.isAdAvailable=!0,this.manualInterstitialEvent=e,this.adPreloading&&(this.adPreloading.resolve({success:!0,code:g.DELIVERED}),this.adPreloading=null))})),window.googletag.pubads().addEventListener("gameManualInterstitialSlotClosed",(()=>{var e,t;if(this.isAdAvailable=!1,null===(e=this.tracker)||void 0===e||e.finishedAd(u.SUCCESS,this.getAdUnitCode(),this.getAdSlotTargeting()),this.adShownPromise){const e={success:!0,code:g.COMPLETED};this.adShownPromise.resolve(e),this.adShownPromise=null}null===(t=this.logger)||void 0===t||t.debug(`${this.getFullName()}: ad closed`)}))})),o.addPrebidAdUnit(this.adUnit)}))}preload(){const e=Object.create(null,{preload:{get:()=>super.preload}});var i,n;return t(this,void 0,void 0,(function*(){const t=yield e.preload.call(this);if(this.clearStorage(),t&&t.success){if(!this.getUserP1Consent()||!this.getVendorConsent(o.GOOGLE_VENDOR_ID))return{success:!1,code:v.ON_SHOW,message:"missing required vendor consent"};if(this.adPreloading)return null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: already loading an ad`),{success:!0,code:g.DELIVERED};const e={aps:!1,prebid:!1},t=o.generateUUID(),r=()=>{e.aps&&e.prebid&&d()},d=()=>{window.googletag.cmd.push((()=>{var e;window.googletag.pubads().setRequestNonPersonalizedAds(this.getUserP4Consent()?0:1),window.googletag.pubads().setPrivacySettings({limitedAds:!this.getUserP1Consent()});try{this.setTargeting({hb_aid:t}),window.googletag.pubads().refresh([this.adSlot])}catch(t){this.isPreloadingAd=!1,this.isAdAvailable=!1,null===(e=this.logger)||void 0===e||e.error(t),this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to send request to ad server - ${t}`}),this.adPreloading=null)}}))},a=()=>{if(!(this.adUnit&&this.adUnit.bids&&this.adUnit.bids.length&&window.pbjs))return e.prebid=!0,void r();window.pbjs.que.push((()=>{const i={auctionId:t,timeout:this.adUnit.timeout,adUnits:[this.adUnit],bidsBackHandler:()=>{window.pbjs.initAdserverSet=!0,window.pbjs.setTargetingForGPTAsync(),e.prebid=!0,r()}};try{window.pbjs.requestBids(i)}catch(t){e.prebid=!0,r()}}))},l=()=>{if(!(this.adUnit&&this.adUnit.uam&&window.apstag))return e.aps=!0,void r();const t=o.toUAMAdUnit(this.adUnit);t.slotID=this.adSlot.getSlotElementId(),window.apstag.fetchBids({slots:[t],timeout:this.adUnit.timeout},(()=>{window.googletag.cmd.push((function(){window.apstag.setDisplayBids(),e.aps=!0,r()}))}))};return null===(n=this.tracker)||void 0===n||n.requestingAd(this.getAdUnitCode(),{hb_aid:t}),window.googletag.cmd.push((()=>{var e;if(window.googletag.destroySlots([this.adSlot]),this.adSlot=window.googletag.defineOutOfPageSlot(this.getAdUnitCode(),window.googletag.enums.OutOfPageFormat.GAME_MANUAL_INTERSTITIAL),!this.adSlot)return null===(e=this.logger)||void 0===e||e.debug(`${this.getFullName()}: unable to create ad slot`),this.isPreloadingAd=!1,this.isAdAvailable=!1,void(this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to create ad slot`}),this.adPreloading=null));this.adSlot.addService(window.googletag.pubads()),a(),l()})),this.adPreloading=new s,this.adPreloading.promise}return t}))}show(){return t(this,void 0,void 0,(function*(){if(!this.isAdAvailable){const e=yield this.preload();return e&&e.success&&this.isAdAvailable?this.showAd():e}return this.showAd()}))}reset(){if(super.reset(),this.adShownPromise){const e={success:!0,code:g.COMPLETED};this.adShownPromise.resolve(e),this.adShownPromise=null}this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to load ad`}),this.adPreloading=null)}canPreload(){return!0}showAd(){const e=Object.create(null,{show:{get:()=>super.show}});var i,o;return t(this,void 0,void 0,(function*(){const t=yield e.show.call(this);return t&&t.success?this.adShownPromise?(null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: already showing ad`),{success:!0,code:g.COMPLETED}):this.manualInterstitialEvent?(null===(o=this.tracker)||void 0===o||o.willShowAd(!0,this.getAdUnitCode(),this.getAdSlotTargeting()),this.manualInterstitialEvent.makeGameManualInterstitialVisible(),this.adShownPromise=new s,this.adShownPromise.promise):{success:!1,code:v.ON_SHOW,message:`${this.getFullName()}: failed to render ad`}:t}))}clearStorage(){var e;try{localStorage.removeItem("__lsv__")}catch(t){null===(e=this.logger)||void 0===e||e.debug(`${this.getFullName()}: unable to clear storage`)}}}class E extends y{constructor(e){super(n.REWARD,e),this.rewardSlotEvent=null,this.skipped=!0,this.adShownPromise=null}canPreload(){return!0}init(e,i,s){const o=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){yield o.init.call(this,e,i,s),window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("rewardedSlotReady",(e=>{this.rewardSlotEvent=e,this.adPreloading&&(this.adPreloading.resolve({success:!0,code:g.DELIVERED}),this.adPreloading=null)})),window.googletag.pubads().addEventListener("rewardedSlotGranted",(()=>{this.skipped=!1})),window.googletag.pubads().addEventListener("rewardedSlotClosed",(()=>{var e,t;if(this.isAdAvailable=!1,null===(e=this.logger)||void 0===e||e.debug(`${this.getFullName()}: ad closed, skipped? ${this.skipped}`),null===(t=this.tracker)||void 0===t||t.finishedAd(this.skipped?u.SKIPPED:u.SUCCESS,this.getAdUnitCode()),this.adShownPromise){const e={success:!0,code:this.skipped?g.DELIVERED:g.COMPLETED};this.adShownPromise.resolve(e),this.adShownPromise=null}this.skipped=!0,this.rewardSlotEvent=null}))}))}))}preload(){const e=Object.create(null,{preload:{get:()=>super.preload}});var i;return t(this,void 0,void 0,(function*(){const t=yield e.preload.call(this);return t&&t.success?this.adPreloading?(null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: already loading an ad`),{success:!0,code:g.DELIVERED}):(this.rewardSlotEvent=null,this.skipped=!0,window.googletag.cmd.push((()=>{var e,t;try{window.googletag.pubads().setRequestNonPersonalizedAds(this.getUserP4Consent()?0:1),window.googletag.pubads().setPrivacySettings({limitedAds:!this.getUserP1Consent()}),window.googletag.destroySlots([this.adSlot]),this.adSlot=window.googletag.defineOutOfPageSlot(this.getAdUnitCode(),window.googletag.enums.OutOfPageFormat.REWARDED),this.adSlot.addService(window.googletag.pubads()),this.setTargeting(),null===(e=this.tracker)||void 0===e||e.requestingAd(this.getAdUnitCode()),window.googletag.pubads().refresh([this.adSlot])}catch(e){this.reset(),null===(t=this.logger)||void 0===t||t.error({success:!1,code:v.ON_LOAD,message:JSON.stringify(e)}),this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to send request to ad server - ${e}`}),this.adPreloading=null)}})),this.adPreloading=new s,this.adPreloading.promise):t}))}show(){return t(this,void 0,void 0,(function*(){if(!this.isAdAvailable){const e=yield this.preload();return e&&e.success&&this.isAdAvailable?this.showAd():e}return this.showAd()}))}reset(){if(super.reset(),this.adShownPromise){const e={success:!0,code:this.skipped?g.DELIVERED:g.COMPLETED};this.adShownPromise.resolve(e),this.adShownPromise=null}this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to load ad`}),this.adPreloading=null)}showAd(){const e=Object.create(null,{show:{get:()=>super.show}});var i,o;return t(this,void 0,void 0,(function*(){const t=yield e.show.call(this);return t&&t.success?this.adShownPromise?(null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: already showing ad`),{success:!0,code:g.COMPLETED}):this.rewardSlotEvent?(null===(o=this.tracker)||void 0===o||o.willShowAd(!0,this.getAdUnitCode()),this.rewardSlotEvent.makeRewardedVisible(),this.adShownPromise=new s,this.adShownPromise.promise):{success:!1,code:v.ON_SHOW,message:`${this.getFullName()}: failed to render ad`}:t}))}}class S{constructor(e){this.wrapperElement=null,this.videoElement=null,this.adElement=null,this.playing=!1,this.muted=!1,this.videoPlayerConfig=null,this.onToggleCallbacks=[],this.onSoundToggleCallbacks=[],this.toggleVideoElement=null,this.toggleSoundElement=null,this.videoPlayerConfig=e,this.createHTMLElements()}createHTMLElements(){this.wrapperElement=o.stringToHTMLElement("<div></div>");const e='<div><video id="'+this.videoPlayerConfig.id+'" width="'+this.getPlayerWidth()+'px" height="'+this.getPlayerHeight()+'px" playsinline></video></div>',t=o.stringToHTMLElement(e);this.videoElement=t.firstChild,this.adElement=o.stringToHTMLElement("<div style='position: absolute; top:0; min-width: 100%; min-height: 100%;'></div>"),this.toggleVideoElement=o.stringToHTMLElement("<button title='Play/Pause' style='position: absolute;left: 20px;bottom: 16px;height: 30px;width: 65px;font-weight: bold;font-size: 20px; font-family: sans-serif !important; opacity: 0.7;background-color: #fff;border-radius: 5px;border: 1px transparent solid;color: #000;cursor: pointer;line-height: 0;'>II</button>"),this.toggleSoundElement=o.stringToHTMLElement("<button title='Mute/Unmute' style='position: absolute;left: 95px;bottom: 16px;height: 30px;width: 40px;font-weight: bold;font-size: 22px; font-family: sans-serif !important; opacity: 0.7;background-color: #fff;border-radius: 5px;border: 1px transparent solid;color: #000;cursor: pointer;line-height: 0;'>&#x1F50A;</button>"),this.toggleVideoElement.onclick=()=>{this.toggled()},this.toggleSoundElement.onclick=()=>{this.soundToggled()},this.wrapperElement.appendChild(t),this.wrapperElement.appendChild(this.adElement),this.wrapperElement.appendChild(this.toggleVideoElement),this.wrapperElement.appendChild(this.toggleSoundElement)}toggled(){this.playing?this.toggleVideoElement.textContent=String.fromCharCode(9654):this.toggleVideoElement.textContent="II",this.onToggleCallbacks&&this.onToggleCallbacks.length>0&&this.onToggleCallbacks.forEach((e=>{try{e(this.playing)}catch(e){console.error(e)}})),this.playing=!this.playing}soundToggled(){this.muted=!this.muted,this.muted?this.toggleSoundElement.innerHTML="&#x1F507;":this.toggleSoundElement.innerHTML="&#x1F50A;",this.onSoundToggleCallbacks&&this.onSoundToggleCallbacks.length>0&&this.onSoundToggleCallbacks.forEach((e=>{try{e(this.muted)}catch(e){console.error(e)}}))}paused(){this.playing=!1,this.toggleVideoElement.textContent=String.fromCharCode(9654)}resumed(){this.playing=!0,this.toggleVideoElement.textContent="II"}setVolume(e){this.toggleSoundElement.innerHTML=e>0?"&#x1F50A;":"&#x1F507;"}resize(){this.videoElement&&(this.videoElement.setAttribute("width",this.getPlayerWidth()+"px"),this.videoElement.setAttribute("height",this.getPlayerHeight()+"px"))}getVideoHTMLElement(){return this.videoElement}getAdContainerHTMLElement(){return this.adElement}getHTMLWrapper(){return this.wrapperElement}isPlaying(){return this.playing}getPlayerWidth(){return this.videoPlayerConfig.width||o.getBrowserWidth()}getPlayerHeight(){return this.videoPlayerConfig.height||o.getBrowserHeight()}onToggle(e){this.onToggleCallbacks.push(e)}onSoundToggle(e){this.onSoundToggleCallbacks.push(e)}}class I extends P{constructor(e,t){super(e,w.VIDEO,t),this.adsManager=null,this.adsLoader=null,this.adContainer=null,this.skipped=!0,this.isIMAReady=!1,this.adShownPromise=null,this.adPreloading=null,this.videoPlayer=null}init(e,i,s){const r=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){yield r.init.call(this,e,i,s),o.onIMAReady().then((()=>{this.isIMAReady=!0})),this.videoPlayer=I.buildVideoPlayer(this.adUnit,n.INTERSTITIAL===this.getType()||n.REWARD===this.getType()),this.videoPlayer&&(this.videoPlayer.onToggle((e=>{this.adsManager&&(e?this.adsManager.pause():this.adsManager.resume())})),this.videoPlayer.onSoundToggle((e=>{this.adsManager&&(e?this.adsManager.setVolume(0):this.adsManager.setVolume(this.getVolume()))})),o.addPrebidAdUnit(this.adUnit),this.config.pageUrl&&o.setPrebidPageUrl(this.config.pageUrl))}))}preload(){const e=Object.create(null,{preload:{get:()=>super.preload}});var i,n,r,d,a;return t(this,void 0,void 0,(function*(){const t=yield e.preload.call(this);if(t&&t.success){if(!this.isIMAReady)return null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: unable to preload, ima sdk isn't ready yet`),this.isAdAvailable=!1,this.isPreloadingAd=!1,{success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to preload, ima sdk isn't ready yet`};if(!this.adsLoader&&!this.initializeIMAComponents())return null===(n=this.logger)||void 0===n||n.debug(`${this.getFullName()}: unable to initialize ima`),this.isAdAvailable=!1,this.isPreloadingAd=!1,{success:!1,code:v.ON_LOAD,message:`${this.getFullName()}:unable to initialize ima`};if(this.adPreloading)return null===(r=this.logger)||void 0===r||r.debug(`${this.getFullName()}: already loading an ad`),{success:!0,code:g.DELIVERED};const e=this.adUnit,t=o.generateUUID(),l=this.config.customTargeting||{},c={aps:!1,apsVideoTargeting:null,prebid:!1},h=()=>{c.aps&&c.prebid&&u(p())},u=e=>{try{const t=new window.google.ima.AdsRequest;t.adTagUrl=e,this.config.pageUrl&&(t.pageUrl=this.config.pageUrl),t.linearAdSlotWidth=this.adUnit.mediaTypes.video.playerSize[0],t.linearAdSlotHeight=this.adUnit.mediaTypes.video.playerSize[1],this.adsLoader.requestAds(t)}catch(e){this.isAdAvailable=!1,this.isPreloadingAd=!1,this.logger.error(`${this.getFullName()}: unable to send request to ad server - ${e}`),this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to send request to ad server - ${e}`}),this.adPreloading=null)}},p=()=>{var i,s,n,r;const d=c.apsVideoTargeting?o.parseParameters(decodeURIComponent(c.apsVideoTargeting)):{},a={iu:this.getAdUnitCode(),cust_params:Object.assign(Object.assign(Object.assign({},l),{hb_aid:t}),d),output:"vast",vpmute:this.getVolume()>0?0:1};(null===(s=null===(i=this.adUnit.mediaTypes)||void 0===i?void 0:i.video)||void 0===s?void 0:s.maxduration)&&(a.max_ad_duration=1e3*this.adUnit.mediaTypes.video.maxduration),(null===(r=null===(n=this.adUnit.mediaTypes)||void 0===n?void 0:n.video)||void 0===r?void 0:r.minduration)&&(a.min_ad_duration=1e3*this.adUnit.mediaTypes.video.minduration),this.adUnit.mediaTypes.video.startdelay||(this.adUnit.mediaTypes.video.startdelay=0),this.config.pageUrl&&(a.url=this.config.pageUrl,a.description_url=this.config.pageUrl);let h=window.pbjs.adServers.dfp.buildVideoUrl({adUnit:e,params:a});return this.getUserP1Consent()||(h+="&ltd=1"),this.getUserP4Consent()||(h+="&npa=1"),this.getDeviceIdTargeting()&&(h+="&"+o.toUrlQueryParameters(this.getDeviceIdTargeting())),this.ppid&&(h+=`&ppid=${this.ppid}`),h},m=()=>{if(!(this.adUnit&&this.adUnit.bids&&this.adUnit.bids.length&&window.pbjs))return c.prebid=!0,void h();window.pbjs.que.push((()=>{const i={auctionId:t,adUnits:[e],timeout:this.adUnit.timeout,bidsBackHandler:()=>{window.pbjs.initAdserverSet=!0,c.prebid=!0,h()}};try{window.pbjs.requestBids(i)}catch(e){c.prebid=!0,h()}}))},w=()=>{if(!(this.adUnit&&this.adUnit.uam&&window.apstag))return c.aps=!0,void h();const e=o.adUnitPath2NetworkAndCode(this.getAdUnitCode());if(!e)return c.aps=!0,void h();const t={slotID:(i=e.code,i.replaceAll("_","").replaceAll("-","_")),slotName:e.code,mediaType:"video"};var i;window.apstag.fetchBids({slots:[t],timeout:this.adUnit.timeout},(e=>{c.aps=!0,e&&e[0]&&(c.apsVideoTargeting=e[0].encodedQsParams),h()}))};try{null===(d=this.tracker)||void 0===d||d.requestingAd(this.getAdUnitCode(),{hb_aid:t}),m(),w()}catch(e){return void(null===(a=this.logger)||void 0===a||a.error(e))}return this.adPreloading=new s,this.adPreloading.promise}return t}))}show(){const e=Object.create(null,{show:{get:()=>super.show}});var i,o;return t(this,void 0,void 0,(function*(){const t=yield e.show.call(this);return t&&t.success?this.adShownPromise?(null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: already showing ad`),{success:!0,code:g.COMPLETED}):(null===(o=this.tracker)||void 0===o||o.willShowAd(!0,this.getAdUnitCode(),this.getAdSlotParams()),this.adsManager.setVolume(this.getVolume()),this.videoPlayer.setVolume(this.getVolume()),this.adsManager.start(),this.adShownPromise=new s,this.adShownPromise.promise):t}))}reset(){if(super.reset(),this.adsManager&&this.adsManager.destroy(),this.videoPlayer&&this.videoPlayer.resize(),this.adShownPromise){const e={success:!0,code:this.skipped?g.DELIVERED:g.COMPLETED};this.adShownPromise.resolve(e),this.adShownPromise=null}if(this.adPreloading){const e={success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to preload ad`};this.adPreloading.resolve(e),this.adPreloading=null}}canPreload(){return!0}isReady(){return o.isIMAPresent()}isShowingAd(){return!!this.adShownPromise}initializeIMAComponents(){var e,t;if(!o.isIMAPresent())return null===(e=this.logger)||void 0===e||e.debug(`${this.getFullName()}: ima sdk not present`),!1;try{return window.google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.adContainer=new window.google.ima.AdDisplayContainer(this.videoPlayer.getAdContainerHTMLElement(),this.videoPlayer.getVideoHTMLElement()),this.adContainer.initialize(),this.adsLoader=new window.google.ima.AdsLoader(this.adContainer),this.adsLoader.getSettings().setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE),this.adsLoader.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(e=>{const t=new window.google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager=e.getAdsManager(this.videoPlayer.getVideoHTMLElement(),t),this.adsManager.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,this.handleIMAError.bind(this)),this.adsManager.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.handleIMAEvent.bind(this)),this.adsManager.addEventListener(window.google.ima.AdEvent.Type.LOADED,this.handleIMAEvent.bind(this)),this.adsManager.addEventListener(window.google.ima.AdEvent.Type.COMPLETE,this.handleIMAEvent.bind(this)),this.adsManager.addEventListener(window.google.ima.AdEvent.Type.SKIPPED,this.handleIMAEvent.bind(this)),this.adsManager.addEventListener(window.google.ima.AdEvent.Type.STARTED,this.handleIMAEvent.bind(this)),this.adsManager.addEventListener(window.google.ima.AdEvent.Type.CLICK,this.handleIMAEvent.bind(this)),this.adsManager.addEventListener(window.google.ima.AdEvent.Type.PAUSED,this.handleIMAEvent.bind(this)),this.adsManager.addEventListener(window.google.ima.AdEvent.Type.RESUMED,this.handleIMAEvent.bind(this));try{this.adsManager.init(this.videoPlayer.getPlayerWidth(),this.videoPlayer.getPlayerHeight(),window.google.ima.ViewMode.FULLSCREEN)}catch(e){this.handleIMAError(e)}}),!1),this.adsLoader.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,this.handleIMAError.bind(this),!1),!0}catch(e){null===(t=this.logger)||void 0===t||t.debug(`${this.getFullName()}: unable to initialize ima components - ${e}`)}return!1}handleIMAEvent(e){var t,i;switch(e.type){case window.google.ima.AdEvent.Type.LOADED:null===(t=this.logger)||void 0===t||t.debug(`${this.getFullName()}: ad filled`),this.isAdAvailable=!0,this.isPreloadingAd=!1,null===(i=this.tracker)||void 0===i||i.receivedAdResponse(h.SUCCESS,this.getAdUnitCode(),this.getAdSlotParams()),this.adsLoader.__cad=e.getAd(),e.getAd()&&e.getAd().getAdId()&&(window.google.ima.__lads=window.google.ima.__lads||[],window.google.ima.__lads.push(e.getAdData()),window.google.ima.__lads.length>20&&(window.google.ima.__lads=window.google.ima.__lads.slice(window.google.ima.__lads.length-20))),this.adPreloading&&(this.adPreloading.resolve({success:!0,code:g.DELIVERED}),this.adPreloading=null);break;case window.google.ima.AdEvent.Type.SKIPPED:this.skipped=!0,this.adClosed();break;case window.google.ima.AdEvent.Type.COMPLETE:this.skipped=!1,this.adClosed();break;case window.google.ima.AdEvent.Type.STARTED:this.skipped=!0,this.videoPlayer.resumed();break;case window.google.ima.AdEvent.Type.RESUMED:this.videoPlayer.resumed();break;case window.google.ima.AdEvent.Type.PAUSED:this.videoPlayer.paused();break;case window.google.ima.AdEvent.Type.CLICK:this.adsManager&&this.videoPlayer&&this.videoPlayer.isPlaying()&&(this.videoPlayer.paused(),this.adsManager.pause())}}handleIMAError(e){var t,i;if(e&&e.getError&&e.getError().getErrorCode&&1009===e.getError().getErrorCode())return null===(t=this.tracker)||void 0===t||t.receivedAdResponse(h.NOFILL,this.getAdUnitCode(),this.getAdSlotParams()),this.skipped=!0,this.isAdAvailable=!1,this.isPreloadingAd=!1,void(this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to preload ad`}),this.adPreloading=null));if(this.adShownPromise){const t={success:!1,code:v.ON_SHOW,message:`${e&&e.getError&&e.getError().getMessage?e.getError().getMessage():""}`};this.adShownPromise.resolve(t),this.adShownPromise=null}this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to preload ad`}),this.adPreloading=null),null===(i=this.logger)||void 0===i||i.error(`${this.getFullName()}: ${e&&e.getError&&e.getError().getMessage?e.getError().getMessage():"unknown error"}`),this.reset()}adClosed(){var e,t;if(null===(e=this.logger)||void 0===e||e.debug(`${this.getFullName()}: ad closed, skipped? ${this.skipped}`),null===(t=this.tracker)||void 0===t||t.finishedAd(this.skipped?u.SKIPPED:u.SUCCESS,this.getAdUnitCode(),this.getAdSlotParams()),this.isAdAvailable=!1,this.videoPlayer.paused(),this.adShownPromise){const e={success:!0,code:this.skipped?g.DELIVERED:g.COMPLETED};this.adShownPromise.resolve(e),this.adShownPromise=null}}getAdSlotParams(){return this.adsLoader&&this.adsLoader.params?this.adsLoader.params:{}}static buildVideoPlayer(e,t){const i={id:o.isFunction(e.code)?e.code():e.code};return t||(i.width=e.mediaTypes.video.playerSize[0],i.height=e.mediaTypes.video.playerSize[1]),new S(i)}}class T{constructor(e){this.contentElement=null,this.modalElement=null,this.createHTMLElements(e)}createHTMLElements(e){const t=document.createElement("div");t.style.cssText="visibility: hidden; position: fixed;top: 0;left: 0;height: 100%;width: 100%;z-index: 9223372036854775807;background-color: rgba(0,0,0,0.85);";const i=document.createElement("div");t.appendChild(i),i.style.cssText="display: flex; align-items: center; justify-content: center; height: 100%; width: 100%; margin: 0; padding: 0; outline: none;";const s=document.createElement("div");if(i.appendChild(s),s.style.cssText="position: relative; margin: 0; outline: none; background-color: #fff; box-shadow: 0px 8px 12px rgb(60 64 67 / 15%), 0px 4px 4px rgb(60 64 67 / 30%); border-radius: 5px;",e){const e=document.createElement("div");s.appendChild(e),e.style.cssText="width: 100%; display: table; height: 24px; background-color: #fff; margin: 0; padding: 0; outline: none;border-radius: 5px 5px 0px 0px;";const t=document.createElement("div");e.appendChild(t),t.style.cssText="float: left; display: table; transition: opacity 1s, background .75s; -webkit-transition: opacity 1s, background .75s; -moz-transition: opacity 1s, background .75s; -o-transition: opacity 1s, background .75s; background: transparent; color: #fff; padding-bottom: 10px; padding-top: 10px;",t.innerHTML="<div style=\"font-size: 14px; font-weight: 700; font-family: 'Roboto', arial, sans-serif; color: #202124; position: relative; height: 25px; padding: 2px 16px 0; float: left; display: table-cell; vertical-align: middle; text-align: center; line-height: 25px;\"> Ad </div>";const i=document.createElement("div");e.appendChild(i),i.style.cssText="color: black; opacity: 0.95; padding: 12px 20px 0; float: right; display: table-cell;vertical-align: middle;",i.setAttribute("aria-label","Close"),i.setAttribute("tabindex","1"),i.innerHTML='<div style="cursor: pointer; display: table-cell;vertical-align: middle;"><svg viewBox="0 0 48 48" fill="#5F6368" style="height: 1.5em; width: 1.5em; margin-left: -0.5em; margin-right: -0.5em; vertical-align: middle; padding-bottom: 1px;"><path d="M38 12.83L35.17 10 24 21.17 12.83 10 10 12.83 21.17 24 10 35.17 12.83 38 24 26.83 35.17 38 38 35.17 26.83 24z"></path><path d="M0 0h48v48H0z" fill="none"></path></svg></div>',i.onclick=this.close.bind(this)}const o=document.createElement("div");s.appendChild(o),o.style.cssText="transition: opacity 1s; -webkit-transition: opacity 1s; position: relative; margin: 0; padding: 0; outline: none; font-size: 0",this.contentElement=o,this.modalElement=t,document.body.appendChild(this.modalElement)}close(){this.modalElement.style.visibility="hidden"}show(){this.modalElement.style.visibility="visible"}addContent(e){const t=document.createElement("div");t.appendChild(e);const i=t.firstChild;return this.contentElement.appendChild(i),i}deleteCreativeContent(){this.contentElement.innerHTML=""}}class C extends I{constructor(e){super(n.INTERSTITIAL,e),this.modal=null}init(e,i,s){const o=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){yield o.init.call(this,e,i,s),this.modal=new T(!1),this.modal.addContent(this.videoPlayer.getHTMLWrapper())}))}show(){return t(this,void 0,void 0,(function*(){if(!this.isAdAvailable){const e=yield this.preload();return e.success&&this.isAdAvailable?this.showAd():e}return this.showAd()}))}showAd(){const e=Object.create(null,{show:{get:()=>super.show}});return t(this,void 0,void 0,(function*(){this.isAdAvailable&&!this.isShowingAd()&&this.modal.show();try{return yield e.show.call(this)}finally{this.isShowingAd()||this.modal.close()}}))}reset(){super.reset(),this.modal&&this.modal.close()}}class D extends I{constructor(e){super(n.REWARD,e),this.modal=null}init(e,i,s){const o=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){yield o.init.call(this,e,i,s),this.modal=new T(!1),this.modal.addContent(this.videoPlayer.getHTMLWrapper())}))}show(){return t(this,void 0,void 0,(function*(){if(!this.isAdAvailable){const e=yield this.preload();return e.success&&this.isAdAvailable?this.showAd():e}return this.showAd()}))}showAd(){const e=Object.create(null,{show:{get:()=>super.show}});return t(this,void 0,void 0,(function*(){this.isAdAvailable&&!this.isShowingAd()&&this.modal.show();try{return yield e.show.call(this)}finally{this.isShowingAd()||this.modal.close()}}))}reset(){super.reset(),this.modal&&this.modal.close()}}class R extends P{constructor(e){super(n.BANNER,w.DISPLAY,e),this.banners=[]}init(e,i,s){const n=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){if(yield n.init.call(this,e,i,s),this.adUnits){const t=[];this.adUnits.forEach((i=>{const s=JSON.parse(JSON.stringify(e));s.config.adUnit=i,s.config.adUnits=null;const n=new L(o.isTabVisible,this.logger);t.push(n.init(s,this.controls,this.tracker).then((()=>{this.banners.push(n)}),(e=>{var t;null===(t=this.logger)||void 0===t||t.error(e)})))})),yield Promise.allSettled(t).then((()=>this.isAdAvailable=!0)),this.scheduledRefresh()}}))}show(){const e=Object.create(null,{show:{get:()=>super.show}});return t(this,void 0,void 0,(function*(){const t=yield e.show.call(this);if(t.success&&this.banners)try{const e=this.banners.filter((e=>e.isVisible()&&e.isRefreshable())),t=e.map((e=>e.show()));this.auction(e),yield Promise.all(t)}catch(e){return{success:!1,code:v.ON_SHOW,message:e.message}}return t}))}auction(e){var t,i;if(!e||e.length<1)return;const s={aps:!1,prebid:!1},n=Math.max(...e.map((e=>e.getAdUnit().timeout))),r=o.generateUUID(),d=()=>{s.aps&&s.prebid&&a()},a=()=>{window.googletag.cmd.push((()=>{var t;window.googletag.pubads().setRequestNonPersonalizedAds(this.getUserP4Consent()?0:1),window.googletag.pubads().setPrivacySettings({limitedAds:!this.getUserP1Consent()}),e.forEach((e=>e.setTargeting({hb_aid:r})));const i=e.map((e=>e.getAdSlot())).filter((e=>e));try{window.googletag.pubads().refresh(i)}catch(i){return e.forEach((e=>e.reset())),void(null===(t=this.logger)||void 0===t||t.error(i))}}))};try{null===(t=this.tracker)||void 0===t||t.requestingAd(this.getFullName(),{hb_aid:r}),(()=>{const t=e.map((e=>e.getAdUnit())).filter((e=>e&&e.bids&&e.bids.length));if(!(t&&t.length&&window.pbjs))return s.prebid=!0,void d();window.pbjs.que.push((()=>{const e={auctionId:r,adUnits:t,timeout:n,bidsBackHandler:()=>{window.googletag.cmd.push((function(){window.pbjs.initAdserverSet=!0,s.prebid=!0,window.pbjs.setTargetingForGPTAsync(),d()}))}};try{window.pbjs.requestBids(e)}catch(e){s.prebid=!0,d()}}))})(),(()=>{const t=e.map((e=>e.getAdUnit())).filter((e=>e&&e.uam)).map((e=>o.toUAMAdUnit(e)));if(!(t&&t.length&&window.apstag))return s.aps=!0,void d();window.apstag.fetchBids({slots:t,timeout:n},(()=>{window.googletag.cmd.push((function(){window.apstag.setDisplayBids(),s.aps=!0,d()}))}))})()}catch(e){return void(null===(i=this.logger)||void 0===i||i.error(e))}}scheduledRefresh(){setTimeout((()=>t(this,void 0,void 0,(function*(){window.pbjs.que.push((()=>{window.googletag.cmd.push((()=>{this.show().finally((()=>this.scheduledRefresh()))}))}))}))),200)}canPreload(){return!1}reset(){}isReady(){return!0}}class L extends y{constructor(e,t){super(n.BANNER,t),this.adShownPromise=null,this.refreshInterval=31e3,this.lastRefreshed=null,this.impressionViewed=!1,this.isTabVisible=e}init(e,i,s){const n=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){yield n.init.call(this,e,i,s),this.adUnit.refresh&&(this.refreshInterval=this.adUnit.refresh),window.googletag.cmd.push((()=>{var e,t;if(window.googletag.pubads().addEventListener("slotRenderEnded",(e=>{var t;if(this.adSlot===e.slot){if(this.adShownPromise){const t={success:!0,code:g.COMPLETED};this.adShownPromise.resolve(t),this.adShownPromise=null,this.impressionViewed=!!e.isEmpty}null===(t=this.tracker)||void 0===t||t.finishedAd(e.isEmpty?u.NOFILL:u.SUCCESS,this.getAdUnitCode(),this.getAdSlotTargeting())}})),window.googletag.pubads().addEventListener("impressionViewable",(e=>{this.adSlot===e.slot&&(this.impressionViewed=!0)})),this.adSlot=window.googletag.defineSlot(this.getAdUnitCode(),null===(t=null===(e=this.adUnit.mediaTypes)||void 0===e?void 0:e.banner)||void 0===t?void 0:t.sizes,this.getAdUnitCode()),!this.adSlot)throw this.isInitialized=!1,new Error("unable to create banner ad slot");this.adSlot.addService(window.googletag.pubads()),o.addPrebidAdUnit(this.adUnit)}))}))}show(){const e=Object.create(null,{show:{get:()=>super.show}});var i,o;return t(this,void 0,void 0,(function*(){this.isAdAvailable=!0;const t=yield e.show.call(this);return t&&t.success?this.adShownPromise?(null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: already fetching ad`),{success:!1,code:v.ON_SHOW,message:`${this.getFullName()}: already fetching ad`}):(null===(o=this.tracker)||void 0===o||o.willShowAd(!0,this.getAdUnitCode(),this.getAdSlotTargeting()),this.lastRefreshed=new Date,this.adShownPromise=new s,this.adShownPromise.promise):t}))}reset(){if(this.adShownPromise){const e={success:!0,code:g.COMPLETED};this.adShownPromise.resolve(e),this.adShownPromise=null}}canPreload(){return!1}getAdSlotHTMLElement(){var e;if(this.getAdUnitCode())try{return null===(e=null===window||void 0===window?void 0:window.document)||void 0===e?void 0:e.getElementById(this.getAdUnitCode())}catch(e){return null}}getAdUnit(){return this.adUnit}getAdSlot(){return this.adSlot}isVisible(){return this.adSlot&&o.isHTMLElementVisible(this.getAdSlotHTMLElement())}isRefreshable(){return null==this.lastRefreshed||(new Date).getTime()-this.lastRefreshed.getTime()>this.refreshInterval&&this.impressionViewed&&this.isTabVisible()}}class U extends P{constructor(e,t){super(null!=t?t:n.REWARD,w.SURVEY,e),this.skipped=!0,this.adShownPromise=null,this.adPreloading=null,this.eventFields=null}init(e,i,s){const n=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){yield n.init.call(this,e,i,s),window.pollfishConfig=Object.assign(Object.assign({},window.pollfishConfig||{}),{ready:()=>{},surveyAvailable:this.onSurveyAvailable.bind(this),surveyNotAvailable:this.onSurveyNotAvailable.bind(this),surveyCompletedCallback:this.onSurveyCompleted.bind(this),userNotEligibleCallback:this.onUserDisqualified.bind(this),closeAndNoShowCallback:this.onSurveyCloseAndNoShow.bind(this),closeCallback:this.onSurveyClose.bind(this)}),o.pollfishLoaded&&!this.isAdAvailable&&this.preload()}))}isReady(){return o.pollfishLoaded}canPreload(){return!0}reset(){if(super.reset(),this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to load ad`}),this.adPreloading=null),this.adShownPromise){const e={success:!0,code:this.skipped?g.DELIVERED:g.COMPLETED};window.Pollfish.hide(),this.adShownPromise.resolve(e),this.adShownPromise=null}}preload(){const e=Object.create(null,{preload:{get:()=>super.preload}});var i,o,n;return t(this,void 0,void 0,(function*(){const t=yield e.preload.call(this);return t&&t.success?(this.adPreloading&&(null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: already loading an ad`),this.adPreloading.promise),this.skipped=!0,null===(o=this.tracker)||void 0===o||o.requestingAd(this.getAdUnitCode()),null===(n=window.Pollfish)||void 0===n||n.restart(window.pollfishConfig),this.adPreloading=new s,this.adPreloading.promise):t}))}show(){var e;return t(this,void 0,void 0,(function*(){if(!this.isAdAvailable&&(null===(e=this.config)||void 0===e?void 0:e.blocking)){const e=yield this.preload();return e&&e.success&&this.isAdAvailable?this.showAd():e}return this.showAd()}))}showAd(){const e=Object.create(null,{show:{get:()=>super.show}});var i,n;return t(this,void 0,void 0,(function*(){const t=yield e.show.call(this);return t&&t.success?this.adShownPromise?(null===(i=this.logger)||void 0===i||i.debug(`${this.getFullName()}: already showing survey`),this.adShownPromise.promise):this.isAdAvailable?(o.overridePollfishContainerZIndex(2147483647),null===(n=this.tracker)||void 0===n||n.willShowAd(!0,this.getAdUnitCode()),window.Pollfish.showFullSurvey(),this.adShownPromise=new s,this.adShownPromise.promise):{success:!1,code:v.ON_SHOW,message:`${this.getFullName()}: failed to render survey`}:(t&&!t.success&&!this.isAdAvailable&&this.isInitialized&&this.preload(),t)}))}onSurveyAvailable(e){var t,i;this.isAdAvailable=!0,this.isPreloadingAd=!1,this.adPreloading&&(this.adPreloading.resolve({success:!0,code:g.DELIVERED}),this.adPreloading=null),null===(t=this.logger)||void 0===t||t.debug(`${this.getFullName()}: ad filled`),this.eventFields={cpm:10*e.revenue,duration:e.survey_loi},null===(i=this.tracker)||void 0===i||i.receivedAdResponse(h.SUCCESS,this.getAdUnitCode(),this.eventFields)}onSurveyNotAvailable(){var e,t;this.isAdAvailable=!1,this.isPreloadingAd=!1,this.eventFields=null,this.adPreloading&&(this.adPreloading.resolve({success:!1,code:v.ON_LOAD,message:`${this.getFullName()}: unable to load ad`}),this.adPreloading=null),null===(e=this.logger)||void 0===e||e.debug(`${this.getFullName()}: unable to load ad`),null===(t=this.tracker)||void 0===t||t.receivedAdResponse(h.NOFILL,this.getAdUnitCode())}onSurveyCompleted(){this.skipped=!1,this.isAdAvailable=!1}onUserDisqualified(){this.skipped=!0,this.isAdAvailable=!1}onSurveyCloseAndNoShow(){this.skipped=!0,this.onSurveyClose()}onSurveyClose(){var e,t;if(null===(e=this.logger)||void 0===e||e.debug(`${this.getFullName()}: survey closed, skipped? ${this.skipped}`),null===(t=this.tracker)||void 0===t||t.finishedAd(this.skipped?u.SKIPPED:u.SUCCESS,this.getAdUnitCode(),this.eventFields),this.skipped||(this.eventFields=null),this.adShownPromise){const e={success:!0,code:this.skipped?g.DELIVERED:g.COMPLETED};this.adShownPromise.resolve(e),this.adShownPromise=null}}}class O extends U{constructor(e){super(e,n.SURVEY)}}class N{constructor(){this.bootstrapMapper={"fran#display#interstitial":{f:N.bootstrapDisplayInterstitial,Type:b},"fran#display#reward":{f:N.bootstrapDisplayReward,Type:E},"fran#display#banner":{f:N.bootstrapDisplayBanner,Type:R},"fran#video#interstitial":{f:N.bootstrapVideoAdProvider,Type:C},"fran#video#reward":{f:N.bootstrapVideoAdProvider,Type:D},"fran#survey#reward":{f:N.bootstrapSurveyAdProvider,Type:U},"fran#survey#survey":{f:N.bootstrapSurveyAdProvider,Type:O}}}bootstrap(e,t){e=e||{};const i=[];return t.forEach((t=>{t in this.bootstrapMapper&&(i.push(new this.bootstrapMapper[t].Type),this.bootstrapMapper[t].f(e))})),i}static bootstrapDisplayInterstitial(e){o.loadGPT(e.gpt),o.loadApsTag(e.uam),o.loadPrebid(e.prebid),o.initializePrebid(e.prebid)}static bootstrapDisplayReward(e){o.loadGPT(e.gpt)}static bootstrapDisplayBanner(e){o.loadGPT(e.gpt),o.loadApsTag(e.uam),o.loadPrebid(e.prebid),o.initializePrebid(e.prebid)}static bootstrapVideoAdProvider(e){o.loadIMA(e.ima),o.loadApsTag(e.uam),o.loadPrebid(e.prebid),o.initializePrebid(e.prebid)}static bootstrapSurveyAdProvider(e){o.loadPollfish(e.pollfish)}}class k{ensureInit(e){if(this.adProviders)return;if(!this.isFranConfigured(e))return void(this.adProviders=[]);const t=e.vendors.fran,i=e.providers.map((e=>(this.expandProviderAdUnitCode(e.config),e.name+"#"+e.type))),s=new N;this.adProviders=s.bootstrap(t,i)}getProviders(e){return this.ensureInit(e),this.adProviders}setDeviceId(e){var t;null===(t=this.adProviders)||void 0===t||t.forEach((t=>t.setDeviceId(e)))}setVolume(e){var t;null===(t=this.adProviders)||void 0===t||t.forEach((t=>t.setVolume(e)))}setUserP1Consent(e){var t;null===(t=this.adProviders)||void 0===t||t.forEach((t=>t.setUserP1Consent(e)))}setUserP4Consent(e){var t;null===(t=this.adProviders)||void 0===t||t.forEach((t=>t.setUserP4Consent(e)))}setVendorConsents(e){var t;null===(t=this.adProviders)||void 0===t||t.forEach((t=>t.setVendorConsents(e)))}setChannelId(e){this.channelId=e}isFranConfigured(e){var t;return null!=(null===(t=null==e?void 0:e.vendors)||void 0===t?void 0:t.fran)&&null!=(null==e?void 0:e.providers)}expandProviderAdUnitCode(e){const t=e=>{if(e&&e.code&&this.channelId){const t=k.PARTNER_ID+"-"+this.channelId,i=this.isFunction(e.code)?e.code():e.code,s=i.split("/").pop();e.code=i.replace(s,t+"-"+s)}};e&&e.adUnit&&t(e.adUnit),e&&e.adUnits&&e.adUnits.forEach((e=>t(e)))}isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}}k.PARTNER_ID="frvr";class _{constructor(e){this.logger=e}init(){return t(this,void 0,void 0,(function*(){}))}setProgress(e){var t;const i=(100*e).toFixed(1);null===(t=this.logger)||void 0===t||t.info(`[channel-web] progress: ${i}%`)}complete(){var e;return t(this,void 0,void 0,(function*(){null===(e=this.logger)||void 0===e||e.info("[channel-web] complete")}))}}class M extends Error{constructor(){super(...arguments),this.code="USER_INPUT",this.message="User rejected prompt to add to home screen"}}class x{constructor(e,t){this.logger=e,this.tracker=t,this.calledAlready=!1}init(){return t(this,void 0,void 0,(function*(){"serviceWorker"in navigator&&(navigator.serviceWorker.register("./service-worker.js").then((e=>{var t;null===(t=this.logger)||void 0===t||t.debug("ServiceWorker registration successful with scope: ",e.scope)}),(e=>{var t;null===(t=this.logger)||void 0===t||t.debug("ServiceWorker registration failed: ",e)})),window.addEventListener("beforeinstallprompt",(e=>{var t,i;return null===(t=this.logger)||void 0===t||t.debug("beforeinstallprompt event received: ",e),this.installPromptEvent||(null===(i=this.tracker)||void 0===i||i.logEvent("PWA Before Install Prompt",{}),e.preventDefault(),this.installPromptEvent=e),!1})))}))}canCreateShortcut(){return t(this,void 0,void 0,(function*(){return!!this.installPromptEvent&&!this.calledAlready}))}createShortcut(){var e,i,s,o;return t(this,void 0,void 0,(function*(){null===(e=this.tracker)||void 0===e||e.logEvent("PWA Install Prompt",{}),this.calledAlready=!0;const t=yield this.installPromptEvent.prompt();if(null===(i=this.logger)||void 0===i||i.debug("PWA Install Prompt returned: ",t),"accepted"!==t.outcome)throw null===(o=this.tracker)||void 0===o||o.logEvent("PWA Dismissed",{}),new M;null===(s=this.tracker)||void 0===s||s.logEvent("PWA Installed",{})}))}}class F{isIOS(){return/(ipod|iphone|ipad)/i.test(navigator.userAgent)||/(Macintosh)/i.test(navigator.userAgent)&&"ontouchend"in document}isAndroid(){return/(android)/i.test(navigator.userAgent)&&!/(Windows)/i.test(navigator.userAgent)}configure(e){this.config=e}needsConfiguration(){return!0}canMoveToMobile(){var e,i;return t(this,void 0,void 0,(function*(){return!(!(this.isIOS()&&(null===(e=this.config)||void 0===e?void 0:e.iosAppId)||this.isAndroid())||!(null===(i=this.config)||void 0===i?void 0:i.id))}))}moveToMobile(){return t(this,void 0,void 0,(function*(){const e=this.config;if(this.isIOS())window.location.href="https://apps.apple.com/app/"+(null==e?void 0:e.id)+"/id"+(null==e?void 0:e.iosAppId)+"?mt=1";else if(this.isAndroid()){const t="https://play.google.com/store/apps/details?id=com.frvr."+(null==e?void 0:e.id);navigator&&navigator.getInstalledRelatedApps?navigator.getInstalledRelatedApps().then((function(i){i.length>0?window.location.href=`intent://${null==e?void 0:e.id}/#Intent;scheme=frvr;package=com.frvr.${null==e?void 0:e.id};end`:window.location.href=t})).catch((function(){console.warn("Related Apps API is not supported. Redirecting to Google Play."),window.location.href=t})):window.location.href=t}}))}}class j{getData(){return t(this,void 0,void 0,(function*(){return this.getEntryPointData()}))}getProperty(e){var i,s;return t(this,void 0,void 0,(function*(){return null!==(s=null===(i=this.getEntryPointData())||void 0===i?void 0:i[e])&&void 0!==s?s:void 0}))}getName(){return t(this,void 0,void 0,(function*(){return this.getProperty("name")}))}getEntryPointData(){if(this.entrypointData)return this.entrypointData;try{this.entrypointData=Object.fromEntries(new URLSearchParams(window.location.search))}catch(e){this.entrypointData={}}return this.entrypointData}}class V{constructor(e){this.config=e}canNavigate(){return!0}navigate(e,i){return t(this,void 0,void 0,(function*(){window.open(e,i||"_blank")}))}canOpenChannelAppStore(){return!0}openChannelAppStore(){return t(this,void 0,void 0,(function*(){this.navigate(`https://${this.config.gameId}.frvr.com`,"_self")}))}}class ${constructor(e,t){this.pixelId=e,this.logger=t,this.hasInitEventBeenSent=!1}init(e){return t(this,void 0,void 0,(function*(){this.addFacebookMetaPixelQueue(),e.onConsentChanged((e=>{(e&$.REQUIRED_CONSENT_FLAGS)===$.REQUIRED_CONSENT_FLAGS&&this.addFacebookMetaPixelLoader()}))}))}getName(){return"metapixel"}send(e,t,i,s){switch(e){case"page_loading":this.fbqTrack("PageView");break;case"iap_request_payment_success":this.fbqTrack("Purchase",{currency:i.currencyCode,value:i.priceValue})}}fbqTrack(e,t){var i,s,o;window.fbq?(this.hasInitEventBeenSent||(null===(s=this.logger)||void 0===s||s.debug("[metapixel-analytics] tracking fbq event","init",this.pixelId),window.fbq("init",this.pixelId),this.hasInitEventBeenSent=!0),null===(o=this.logger)||void 0===o||o.debug("[metapixel-analytics] tracking fbq event",e,t),void 0!==t?window.fbq("track",e,t):window.fbq("track",e)):null===(i=this.logger)||void 0===i||i.error("[metapixel-analytics] window.fbq not found, enqueueing event")}addFacebookMetaPixelQueue(){var e;if(window.fbq)return;null===(e=this.logger)||void 0===e||e.debug("[metapixel-analytics] installing metapixel queue");this.appendScript("\n    !function(f,b,e,v,n,t,s)\n    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n    n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n    n.queue=[];}(window, document,'script',\n    'https://connect.facebook.net/en_US/fbevents.js');\n    ")}addFacebookMetaPixelLoader(){var e;if(this.hasScriptLoaderBeenAppended)return;null===(e=this.logger)||void 0===e||e.debug("[metapixel-analytics] installing metapixel loader");this.appendScript("\n    !function(f,b,e,v,n,t,s)\n    {t=b.createElement(e);t.async=!0;\n    t.src=v;s=b.getElementsByTagName(e)[0];\n    s.parentNode.insertBefore(t,s)}(window, document,'script',\n    'https://connect.facebook.net/en_US/fbevents.js');\n    "),this.hasScriptLoaderBeenAppended=!0}appendScript(e){const t=document.createElement("script"),i=document.createTextNode(e);t.appendChild(i);window.document.getElementsByTagName("head")[0].appendChild(t)}}$.REQUIRED_CONSENT_FLAGS=e.ConsentOptions.P4PersonalizedAds|e.ConsentOptions.P5PersonalizedContentProfile|e.ConsentOptions.P7MeasureAdPerformance,function(){for(var e=[],t=0;64>t;)e[t]=0|4294967296*Math.abs(Math.sin(++t))}();class z{constructor(e,t){this.auth=t,this.baseUrl=e.replace(/\/$/,"")}getAllPlayerObjects(e,i,s){var o;return t(this,void 0,void 0,(function*(){const t=new URLSearchParams;void 0!==s&&t.set("keys",null!=s?s:"");const n=t.toString(),r=yield null===(o=this.auth)||void 0===o?void 0:o.authenticatedFetch(`${this.baseUrl}/player/${e}/${i}?${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new H(r);return yield r.json()}))}createPlayerObject(e,i,s){var o;return t(this,void 0,void 0,(function*(){const t=yield null===(o=this.auth)||void 0===o?void 0:o.authenticatedFetch(`${this.baseUrl}/player/${e}/${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new H(t);return yield t.json()}))}updatePlayerObject(e,i,s,o){var n;return t(this,void 0,void 0,(function*(){const t=yield null===(n=this.auth)||void 0===n?void 0:n.authenticatedFetch(`${this.baseUrl}/player/${e}/${i}/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok)throw new H(t);return yield t.json()}))}deletePlayerObject(e,i,s,o){var n;return t(this,void 0,void 0,(function*(){const t=yield null===(n=this.auth)||void 0===n?void 0:n.authenticatedFetch(`${this.baseUrl}/player/${e}/${i}/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok)throw new H(t);return yield t.json()}))}}class H extends Error{constructor(e){super(e.statusText),this.response=e,this.response=e,this.name="ResponseError"}}const B={[r.PRODUCTION]:"https://crucible.frvr.com/v1/storage",[r.BETA]:"https://staging.crucible.frvr.com/v1/storage",[r.DEVELOPMENT]:"https://staging.crucible.frvr.com/v1/storage"};class W{constructor(e,t,i){var s,o,n;const r=null!==(s=null==t?void 0:t.overrideURL)&&void 0!==s?s:B[e];this.gameId=t.gameId,this.logger=null==i?void 0:i.logger,this.auth=i.auth,null===(o=this.logger)||void 0===o||o.log(`[frvr-sdk] Player Storage for game ${this.gameId} on ${r}`);const d=null!==(n=i.clientBuilder)&&void 0!==n?n:e=>new z(e,this.auth);this.client=d(r,this.auth)}setItems(e){return t(this,void 0,void 0,(function*(){const t=e.map((e=>this.upsertItem(e.key,e.value)));yield Promise.allSettled(t)}))}getItems(e){return t(this,void 0,void 0,(function*(){const t=(yield this.client.getAllPlayerObjects(this.getUserId(),this.gameId,e.join(","))).items.map((e=>[e.key,e.data]));return Object.fromEntries(t)}))}removeItems(e){return t(this,void 0,void 0,(function*(){const t=this.getUserId(),i=e.map((e=>this.client.deletePlayerObject(t,this.gameId,e,void 0)));yield Promise.allSettled(i)}))}isPersistent(){return!0}getAllItems(){return t(this,void 0,void 0,(function*(){const e=(yield this.client.getAllPlayerObjects(this.getUserId(),this.gameId)).items.map((e=>[e.key,e.data]));return Object.fromEntries(e)}))}upsertItem(e,i){return t(this,void 0,void 0,(function*(){const t=this.getUserId();try{yield this.client.updatePlayerObject(t,this.gameId,e,{version:void 0,data:i})}catch(s){yield this.client.createPlayerObject(t,this.gameId,{key:e,data:i})}}))}getUserId(){return this.auth.getFRVRID()}}var q;r.PRODUCTION,r.BETA,r.DEVELOPMENT,function(e){e[e.create=0]="create",e[e.getCurrentTournament=1]="getCurrentTournament",e[e.getActiveTournaments=2]="getActiveTournaments",e[e.postScore=3]="postScore",e[e.join=4]="join",e[e.leave=5]="leave",e[e.share=6]="share",e[e.invitePlayers=7]="invitePlayers"}(q||(q={}));const G={isSupported:()=>!1,getSupportedAPIs:()=>[],getLeaderboardsChannelId:()=>"empty",getCurrentTournament(){return t(this,void 0,void 0,(function*(){return null}))},create(){return t(this,void 0,void 0,(function*(){return null}))},postScore(){return t(this,void 0,void 0,(function*(){}))},share(){return t(this,void 0,void 0,(function*(){}))},getActiveTournaments(){return t(this,void 0,void 0,(function*(){return[]}))},join(){return t(this,void 0,void 0,(function*(){}))},leave(){return t(this,void 0,void 0,(function*(){}))},invitePlayers(){return t(this,void 0,void 0,(function*(){}))}};class K{constructor(t,s){var o;this.adConfigProvider=t,this.fran=s,this.entryPointProvider=new j,this.adConfigProvider=t,this.fran=null!=s?s:new k,this.fran.setChannelId(e.inMemoryChannelMapper.getChannel()),null!==(o=this.adConfigProvider)&&void 0!==o||(this.adConfigProvider=new i(e.inMemoryChannelMapper.getChannel(),this.getId())),this.characteristics=Object.assign(Object.assign({},e.defaultCharacteristics),{hasDedicatedLoadingScreen:!1})}onModulesUpdated({logger:e,tracker:t}){this.logger=e,this.tracker=t}setConfig(e){this.gameId=e.gameId}getId(){return"web"}getBootstrapper(){return new _(this.logger)}getConsentProvider(){return c}getAnalyticsProviders(t){var i;const s={pixelId:null===(i=null==t?void 0:t.metapixel)||void 0===i?void 0:i.pixelId},o=s.pixelId&&new $(s.pixelId);return[new e.FRVRAnalytics({disableSendBeacon:!this.characteristics.allowSendBeacon}),...o?[o]:[]]}getAnalyticsIDProvider(t){return new e.WebIDProvider(t)}getAdsProviders(e){return[...this.fran.getProviders(e)]}getShortcutProvider(){return new x(this.logger,this.tracker)}getLocalStorageProvider(){return e.buildStorageProvider([e.WebLocalStorageProvider.providerName,a.providerName])}getCloudStorageProvider(e,i,s){return t(this,void 0,void 0,(function*(){return new W(s,Object.assign({gameId:this.gameId},null==i?void 0:i.playerStorage),{auth:e,logger:this.logger})}))}getTrackerContextProvider(t){return e.buildTrackerWebContextProvider(t)}getCrossplay(){return new F}getCharacteristics(){return this.characteristics}getEntryPointProvider(){return this.entryPointProvider}getAdsConfig(e){var i;return t(this,void 0,void 0,(function*(){if(!(null==e?void 0:e.remote))return e;if(!this.gameId)throw new Error("Game ID is not set");try{return yield this.adConfigProvider.get(this.gameId)}catch(e){null===(i=this.logger)||void 0===i||i.error(e)}return e}))}getTournamentsProvider(){return e=this.getId(),Object.assign(Object.assign({},G),{getLeaderboardsChannelId:()=>e});var e}getNavigationProvider(e){return new V(e)}}class Y{getName(){return"crazygames"}isReady(){var e,t,i;return void 0!==(null===(i=null===(t=null===(e=window.CrazyGames)||void 0===e?void 0:e.CrazySDK)||void 0===t?void 0:t.getInstance)||void 0===i?void 0:i.call(t))}useManualControl(){return!1}init(i,s,o){return t(this,void 0,void 0,(function*(){this.adTracker=o;const t=this.getCrazyGamesInstance();if(!t)throw new Error("CrazyGames SDK not available");t.addEventListener("adStarted",(()=>{this.adTracker.receivedAdResponse(e.AdResponseStatus.SUCCESS),this.adTracker.willShowAd(!1)})),t.addEventListener("adFinished",(()=>{this.adTracker.finishedAd(e.AdFinishedStatus.SUCCESS)})),t.addEventListener("adError",(()=>{this.adTracker.receivedAdResponse(e.AdResponseStatus.ERROR),this.adTracker.finishedAd(e.AdFinishedStatus.ERROR)}))}))}setUserConsent(e){}show(){return new Promise(((t,i)=>{const s=this.getCrazyGamesInstance();if(!s)return void i(new Error("CrazyGames SDK not available"));let o=!1;const n=()=>{o=!0},r=()=>{a(),t({success:!0,code:this.getAdSuccessCode()})},d=()=>{a(),i({success:!1,code:o?e.AdError.ON_SHOW:e.AdError.ON_LOAD})},a=()=>{s.removeEventListener("adStarted",n),s.removeEventListener("adFinished",r),s.removeEventListener("adError",d)};s.addEventListener("adStarted",n),s.addEventListener("adFinished",r),s.addEventListener("adError",d),this.adTracker.requestingAd(),s.requestAd(this.getCrazyGamesAdType())}))}getCrazyGamesInstance(){var e,t,i;return null===(i=null===(t=null===(e=window.CrazyGames)||void 0===e?void 0:e.CrazySDK)||void 0===t?void 0:t.getInstance)||void 0===i?void 0:i.call(t)}}class J extends Y{constructor(){super(...arguments),this.CRAZYGAMES_INTERSTITIAL_TYPE="midgame"}getType(){return e.AdType.INTERSTITIAL}getCrazyGamesAdType(){return this.CRAZYGAMES_INTERSTITIAL_TYPE}getAdSuccessCode(){return e.AdSuccess.DELIVERED}}class Q extends Y{constructor(){super(...arguments),this.CRAZYGAMES_REWARDED_TYPE="rewarded"}getType(){return e.AdType.REWARD}getCrazyGamesAdType(){return this.CRAZYGAMES_REWARDED_TYPE}getAdSuccessCode(){return e.AdSuccess.COMPLETED}}function Z(e,t){return new Promise((i=>{let s=document.getElementById(t);s?i():(s=document.createElement("script"),s.setAttribute("id",t),s.setAttribute("type","text/javascript"),s.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(s),s.onload=()=>i())}))}function X(e,t,i){return new Promise(((s,o)=>{let n,r=0;!function d(){if(r++>t)return n&&clearTimeout(n),void o(new Error("Retry limit exceeded"));e().then((e=>{if(void 0!==e)return n&&clearTimeout(n),void s(e);n=setTimeout(d,i)})).catch((()=>{n=setTimeout(d,i)}))}()}))}class ee{constructor(e){this.logger=e}init(){var e;return t(this,void 0,void 0,(function*(){for(this.logger.info("CrazyGames bootstrapper init"),yield Z("https://sdk.crazygames.com/crazygames-sdk-v1.js","crazySdkScript");!(null===(e=window.CrazyGames)||void 0===e?void 0:e.CrazySDK);)yield new Promise((e=>setTimeout(e,100)));const t=window.CrazyGames.CrazySDK.getInstance();t.init(),yield new Promise((e=>{t.addEventListener("initialized",(()=>{e()}))}))}))}setProgress(e){}complete(){return t(this,void 0,void 0,(function*(){}))}}class te extends K{constructor(e,t){super(e,t)}getId(){return"crazygames"}getBootstrapper(){return new ee(this.logger)}getAdsProviders(e){return super.getAdsProviders(e).concat([new J,new Q])}}class ie{getType(){return e.AdType.INTERSTITIAL}getName(){return"microsoft"}isReady(){return!!this.adInstance}init(e,i,s){return t(this,void 0,void 0,(function*(){this.adTracker=s,this.preload()}))}preload(){if(!this.adInstance)return this.loadingPromise||(this.loadingPromise=X((()=>this.load()),5,500).catch((t=>{this.adTracker.receivedAdResponse(e.AdResponseStatus.NOFILL)})).finally((()=>{this.loadingPromise=void 0}))),this.loadingPromise}load(){return t(this,void 0,void 0,(function*(){this.adTracker.requestingAd();const t=yield $msstart.loadAdsAsync();if(null==t?void 0:t.instanceId)return this.adInstance=t,this.adTracker.receivedAdResponse(e.AdResponseStatus.SUCCESS,t.instanceId),t;this.adTracker.receivedAdResponse(e.AdResponseStatus.NOFILL)}))}show(){return t(this,void 0,void 0,(function*(){const t=!!this.adInstance;if(t||(yield this.preload()),!this.adInstance)return{success:!1,code:e.AdError.NOFILL,message:"No ad instance"};const i=this.adInstance;let s;this.adInstance=void 0,this.adTracker.willShowAd(t,i.instanceId);try{s=yield $msstart.showAdsAsync(i.instanceId)}catch(t){return{success:!1,code:e.AdError.ON_SHOW,message:t.message}}try{yield s.showAdsCompletedAsync()}catch(t){return{success:!1,code:e.AdError.ON_SHOW,message:t.message}}return{success:!0,code:e.AdSuccess.COMPLETED}}))}useManualControl(){return!1}setUserConsent(e){}}var se;!function(e){e.TOP="top:320x50",e.BOTTOM="bottom:320x50"}(se||(se={}));class oe{constructor(){this.initialized=!1}getType(){return e.AdType.BANNER}getName(){return"microsoft"}hide(){return t(this,void 0,void 0,(function*(){yield $msstart.hideDisplayAdsAsync(),this.adTracker.finishedAd(e.AdFinishedStatus.SUCCESS)}))}init(e,i,s){return t(this,void 0,void 0,(function*(){this.adTracker=s,this.initialized=!0}))}isReady(){return this.initialized}show(){return t(this,void 0,void 0,(function*(){try{return yield $msstart.showDisplayAdsAsync(se.BOTTOM),this.adTracker.receivedAdResponse(e.AdResponseStatus.SUCCESS),this.adTracker.willShowAd(!1),{success:!0,code:e.AdSuccess.COMPLETED}}catch(t){const i=t;return this.adTracker.receivedAdResponse(e.AdResponseStatus.ERROR),this.adTracker.finishedAd(e.AdFinishedStatus.ERROR),{success:!1,code:e.AdError.ON_SHOW,message:i.description}}}))}useManualControl(){return!0}}class ne{constructor(e,t,i){this.logger=e,this.entryPoint=t,this.tracker=i}init(){var e;return t(this,void 0,void 0,(function*(){if(this.logger.info("Microsoft PWA bootstrapper init"),yield Z("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.12.min.js","msPwaSdkScript"),!(null===(e=null===$msstart||void 0===$msstart?void 0:$msstart.isInMicrosoftStart)||void 0===e?void 0:e.call($msstart)))throw new Error("Not running in Microsoft Start environment");this.logger.info("Running in Microsoft Start environment");const t=yield this.entryPoint.getData();this.tracker.logEvent("entry_point",{channel:"microsoft",entry_point_id:t.entryPointId,entry_point_name:t.entryPointName})}))}setProgress(e){}complete(){return t(this,void 0,void 0,(function*(){}))}}class re{constructor(e){this.tracker=e}init(){return t(this,void 0,void 0,(function*(){}))}canCreateShortcut(){return t(this,void 0,void 0,(function*(){return $msstart.isInMicrosoftStart()}))}createShortcut(){return t(this,void 0,void 0,(function*(){switch(yield $msstart.promptInstallAsync()){case"PROMPT_INSTALL_ACCEPTED":this.tracker.logEvent("ms_promp_install_successfull",{});break;case"PROMPT_INSTALL_DISMISSED":this.tracker.logEvent("ms_promp_install_dismissed",{})}}))}}class de{getData(){return t(this,void 0,void 0,(function*(){return this.getMSEntryPoint()}))}getName(){var e;return t(this,void 0,void 0,(function*(){return null===(e=this.getMSEntryPoint())||void 0===e?void 0:e.entryPointName}))}getMSEntryPoint(){if(this.msEntrypoint)return this.msEntrypoint;if(!(null===$msstart||void 0===$msstart?void 0:$msstart.isInMicrosoftStart()))throw new Error("Not running in Microsoft Start environment");return this.msEntrypoint=$msstart.getEntryPointInfo(),this.msEntrypoint}}class ae extends K{constructor(e,t){super(e,t),this.entryPoint=new de}getId(){return"microsoft"}getBootstrapper(){return new ne(this.logger,this.entryPoint,this.tracker)}getAdsProviders(e){return[new ie,new oe]}getShortcutProvider(){return new re(this.tracker)}getEntryPointProvider(){return this.entryPoint}}const le="discord";var ce,he;!function(e){e[e.ONGOING=1]="ONGOING",e[e.STANDBY=0]="STANDBY"}(ce||(ce={}));class ue{constructor(e,t){this.serviceClient=e,this.logger=t,this.isIAPInitialized=!1,this.isCatalogLoaded=!1,this.completedEntitlements=[],this.name=le,this.isPurchaseSubscribed=!1}getName(){return this.name}isReady(){return this.isIAPInitialized&&this.isCatalogLoaded&&!!window.discordSDK}init(){var e,i;return t(this,void 0,void 0,(function*(){null===(e=this.logger)||void 0===e||e.info("[Discord - IAP]: Executing init"),null===(i=this.logger)||void 0===i||i.info("[Discord - IAP]: Executing iapReady."),this.isIAPInitialized||(yield this.loadDiscordCatalog(),this.isIAPInitialized=!0)}))}loadDiscordCatalog(){var e,i;return t(this,void 0,void 0,(function*(){try{const t=yield this.serviceClient.getProducts();if(!t)throw new Error("[Discord - IAP]: Products not found in IAP service");const i=t,s=(yield window.discordSDK.commands.getSkus()).data;if(null===(e=this.logger)||void 0===e||e.info("[Discord - IAP]: Loaded items catalog.",s),!s)throw new Error("[Discord - IAP]: No Discord SKUs found");const o=[],n=new Map(s.map((e=>[e.id,e])));for(let e=0;e<i.length;e++){const t=n.get(i[e].channels.discord.sku);t&&o.push(Object.assign({productId:i[e].sku,name:i[e].name},t))}if(o.length<=0)throw new Error("[Discord - IAP]: Something went wrong creating the catalog");this.catalog=o,this.isCatalogLoaded=!0}catch(e){null===(i=this.logger)||void 0===i||i.error("[Discord - IAP]: Could not get product list: ",e)}}))}configure(){return t(this,void 0,void 0,(function*(){}))}getProductById(e){var t,i;let s;if(this.catalog){const o=this.catalog.find((t=>t.productId===e));o&&(s={provider:this.name,trackingName:o.name,label:o.name,priceValue:(null===(t=o.price)||void 0===t?void 0:t.amount)/100,currencyCode:null===(i=o.price)||void 0===i?void 0:i.currency})}return s}getProductBySkuId(e){var t,i;let s;if(this.catalog){const o=this.catalog.find((t=>t.id===e));o&&(s={provider:this.name,skuId:o.id,productId:o.productId,trackingName:o.name,label:o.name,priceValue:(null===(t=o.price)||void 0===t?void 0:t.amount)/100,currencyCode:null===(i=o.price)||void 0===i?void 0:i.currency})}return s}getSkuForProduct(e){if(this.catalog){const t=this.catalog.find((t=>t.productId===e));if(t)return t.id}}getSkuType(e){if(this.catalog){const t=this.catalog.find((t=>t.productId===e));if(t)return t.type}}getCatalog(){const e={};for(const t of this.catalog)e[t.productId]={label:t.name,storeId:t.productId};return e}purchase(e,i){return t(this,void 0,void 0,(function*(){if(!this.getProductById(e))throw new Error("[Discord - IAP]: Product not found in catalog");return this.isPurchaseSubscribed||(this.isPurchaseSubscribed=!0,window.discordSDK.subscribe("ENTITLEMENT_CREATE",this.handlePurchaseComplete.bind(this))),window.discordSDK.commands.startPurchase({sku_id:this.getSkuForProduct(e)}).then((i=>t(this,void 0,void 0,(function*(){var t;if(null===(t=this.logger)||void 0===t||t.info("[Discord - IAP]: purchase resolved.",i),i.length>1)throw new Error("[Discord - IAP]: Multiple entitlements found");const s=i[0];return new ge(Object.assign({productId:e},s))}))))}))}consumePurchase(e){return t(this,void 0,void 0,(function*(){if(2!==this.getSkuType(e.productId))return this.serviceClient.consumePurchase(e.transactionReceipt.applicationId,e.purchaseId).then((e=>{})).catch((t=>{var i;throw null===(i=this.logger)||void 0===i||i.log("[Discord - IAP]: error validating purchase",e,t),new Error("[Discord - IAP]: error consuming purchase")}))}))}getUnconsumedPurchases(){return t(this,void 0,void 0,(function*(){return window.discordSDK.commands.getEntitlements().then((({data:e})=>{var t;null===(t=this.logger)||void 0===t||t.info("[Discord - IAP]: Loaded inventory items.",e);const i=e.filter((e=>!(e.consumed||e.deleted))).map((e=>{var t;const i=this.getProductBySkuId(e.sku_id);if(i)return new ge(Object.assign({productId:i.productId},e));null===(t=this.logger)||void 0===t||t.log("[Discord - IAP]: product with given sku does not exist")}));return i}))}))}handlePurchaseComplete(e){var i;return t(this,void 0,void 0,(function*(){null===(i=this.logger)||void 0===i||i.log("[Discord - IAP]: handlePurchaseComplete event",e);const t=this.getProductBySkuId(e.entitlement.sku_id);yield this.validatePurchase(Object.assign(Object.assign({},e.entitlement),{productId:t.productId}))}))}validatePurchase(e){const t={transactionId:e.id,discordUserId:e.user_id,skuId:e.sku_id,applicationId:e.application_id,productId:e.productId};return this.serviceClient.validatePurchase(t).then((e=>{var t;return null===(t=this.logger)||void 0===t||t.log("[Discord - IAP]: validate purchase response",e),e})).catch((e=>{throw new Error("[Discord - IAP]: error validating purchase",e)}))}}class ge{constructor(e){this.channelId=le,this.productId=e.productId,this.purchaseId=e.id,this.transactionReceipt={transactionId:e.id,discordUserId:e.user_id,skuId:e.sku_id,applicationId:e.application_id,productId:e.productId}}}class ve{constructor(e){this.logger=e}init(){return t(this,void 0,void 0,(function*(){}))}setProgress(e){var t;const i=(100*e).toFixed(1);null===(t=this.logger)||void 0===t||t.info(`[channel-web] progress: ${i}%`)}complete(){var e;return t(this,void 0,void 0,(function*(){null===(e=this.logger)||void 0===e||e.info("[channel-web] complete")}))}}!function(e){e.FRVR="frvr",e.FACEBOOK_INSTANT="facebook-instant",e.FACEBOOK_SDK="facebook-web",e.GOOGLE_INTERNAL="google-internal",e.SAMSUNG_INSTANT="samsung-instant",e.APPLE="apple",e.DISCORD="discord"}(he||(he={}));const pe=1006;class me{constructor(e,t,i,s){this.platformId=he.DISCORD,this._isLoggingIn=!0,this.isAuthorized=!1,this._isLoggedIn=!1,this.discordAppID=i,this.logger=s}init(e){return t(this,void 0,void 0,(function*(){this._isLoggingIn=!1,this.authFRVR=e,yield this.doLoginChain()}))}handleFailedAuth(){setTimeout((()=>{var e;null===(e=this.logger)||void 0===e||e.warn("[Discord.auth] App auth failed and proceeding to close app"),window.discordSDK.close(pe,"Authentication or authorization failure")}),300)}doLoginChain(){return t(this,void 0,void 0,(function*(){return X((()=>this.retrieveClientSignature().then((()=>{if(this.isAuthorized&&this.credentials)return this.authFRVR.loginWithProvider(this);throw new Error("[Discord.auth] Authorization failed")})).catch((e=>{var t,i;if(null===(t=this.logger)||void 0===t||t.error("[Discord.auth] Login Chain error in FRVR login",e),!this.isAuthorized)return null===(i=this.logger)||void 0===i||i.log("[Discord.auth] Authorization failed"),this.handleFailedAuth();throw e})).then((()=>{var e;return null===(e=this.logger)||void 0===e||e.log("[Discord.auth] Login Chain FRVR login final step",this._isLoggedIn),this._isLoggedIn||void 0}))),20,300).catch((()=>{var e;null===(e=this.logger)||void 0===e||e.error("[Discord.auth] Max login attempts reached"),this._isLoggingIn=!1,this.credentials=null,this.handleFailedAuth()}))}))}retrieveClientSignature(){return t(this,void 0,void 0,(function*(){yield window.discordSDK.commands.authorize({client_id:this.discordAppID,response_type:"code",state:"",prompt:"none",scope:["rpc.voice.read","rpc.activities.write","guilds","guilds.members.read","identify"]}).then((e=>{var t;null===(t=this.logger)||void 0===t||t.log("[Discord.auth] retrieveClientSignature. Authorize_RPC Response:",e),this.isAuthorized=!0,this.credentials={code:e.code,appId:this.discordAppID}})).catch((e=>{var t;throw null===(t=this.logger)||void 0===t||t.error("[Discord.auth] retrieveClientSignature. Authorize_RPC Error:",e),this.isAuthorized=!1,this._isLoggingIn=!1,this.credentials=null,e})).finally((()=>{this._isLoggingIn=!1}))}))}onFRVRTokensReceived(e){var i;return t(this,void 0,void 0,(function*(){const t=null===(i=e.getRefreshPayload())||void 0===i?void 0:i.extra;if("discord"!=t.platform)return;const s=(null==t?void 0:t.credentials).accessToken;this.credentials.userId=null==t?void 0:t.identifier,this.isAuthorized&&s&&(yield window.discordSDK.commands.authenticate({access_token:s}).then((e=>{var t;null===(t=this.logger)||void 0===t||t.log("[Discord.auth] onFRVRTokensReceived: Authenticate_RPC Response:",e),window.discordSDK._FRVRPatched_user=e.user,this._isLoggedIn=!0})).catch((e=>{var t;if(4002==e.code)return null===(t=this.logger)||void 0===t||t.log("[Discord.auth] onFRVRTokensReceived: Already authenticated"),this._isLoggedIn=!0,!0;throw e})))}))}getPlatformId(){return this.platformId}handlesFRVRLogin(){return!0}isLoginSupported(){return!1}isLogoutSupported(){return!1}prohibitsLoginWithFRVRCredentials(){return!0}isLoggingIn(){return this._isLoggingIn}getCredentials(){return this.credentials}getLoginSignature(){var e;return t(this,void 0,void 0,(function*(){return null===(e=this.credentials)||void 0===e?void 0:e.code}))}getUserID(){var e;return t(this,void 0,void 0,(function*(){return null===(e=this.credentials)||void 0===e?void 0:e.userId}))}isLoggedIn(){return this._isLoggedIn}login(){return t(this,void 0,void 0,(function*(){return!1}))}logout(){}}const we=(e,t)=>null===t?null:"https://cdn.discordapp.com/avatars/"+e+"/"+t+".png";class fe{id(){var e;return null===(e=this.getDiscordUserData())||void 0===e?void 0:e.id}name(){var e;return null===(e=this.getDiscordUserData())||void 0===e?void 0:e.username}image(){var e;const t=this.id(),i=null===(e=this.getDiscordUserData())||void 0===e?void 0:e.avatar;return we(t,i)}loadImage(e){return new Promise(((i,s)=>t(this,void 0,void 0,(function*(){const t=yield fetch(e);if(!t.ok)return void s(new Error(`${t.status} ${t.statusText}`));const o=yield t.blob(),n=new FileReader;n.onerror=s,n.onload=()=>{i(n.result)},n.readAsDataURL(o)}))))}getDiscordUserData(){var e;return null===(e=window.discordSDK)||void 0===e?void 0:e._FRVRPatched_user}}var Ae,Pe,ye,be;!function(e){e[e.shareMessage=0]="shareMessage",e[e.sendUpdate=1]="sendUpdate",e[e.invite=2]="invite",e[e.getFriends=3]="getFriends",e[e.getContextId=4]="getContextId",e[e.getContextData=5]="getContextData",e[e.getContextPlayers=6]="getContextPlayers"}(Ae||(Ae={})),function(e){e.UPDATE_STATUS="UPDATE_STATUS",e.SEND_GAME_INVITE="SEND_GAME_INVITE"}(Pe||(Pe={})),function(e){e.onFriendStatusUpdated="FRIEND_STATUS_UPDATED",e.onConnect="ON_CONNECT",e.onGameInvite="RECEIVE_GAME_INVITE",e.onError="ON_ERROR"}(ye||(ye={})),function(e){e.open="open",e.close="close",e.error="error",e.message="message",e.retry="retry"}(be||(be={}));class Ee{constructor(e){this.logger=e}shareMessage(e){return null}sendUpdate(e){return t(this,void 0,void 0,(function*(){return null}))}invite(e){return t(this,void 0,void 0,(function*(){}))}getContextId(){return t(this,void 0,void 0,(function*(){const{data:e}=yield window.discordSDK.commands.getSelectedVoiceChannel();return e.id}))}getContextData(){return t(this,void 0,void 0,(function*(){const{data:e}=yield window.discordSDK.commands.getSelectedVoiceChannel();return e}))}getContextPlayers(){var e;return t(this,void 0,void 0,(function*(){const{data:t}=yield window.discordSDK.commands.getSelectedVoiceChannel();return(null===(e=null==t?void 0:t.voice_states)||void 0===e?void 0:e.map((e=>({id:e.user.id,name:e.user.username,image:we(e.user.id,e.user.avatar),channel:le,nickname:e.nick}))))||[]}))}getFriends(){return t(this,void 0,void 0,(function*(){return window.discordSDK.commands.getSelectedVoiceChannel().then((({data:e})=>{var t;return null===(t=e.voice_states)||void 0===t?void 0:t.map((e=>({id:e.user.id,name:e.user.username,image:we(e.user.id,e.user.avatar),channel:le,nickname:e.nick})))}))}))}getSupportedAPIs(){return[Ae.getContextId,Ae.getContextData,Ae.getContextPlayers,Ae.getFriends]}}const Se=/\{([a-z]+)\}/g;function Ie({originalURL:e,prefix:t,prefixHost:i,target:s}){const o=new URL(`https://${s}`),n=function(e){const t=e.replaceAll(".","\\.").replaceAll("%7B","{").replaceAll("%7D","}").replace(Se,((e,t)=>`(?<${t}>[\\w-]+)`));return new RegExp(`${t}(/|$)`)}(o.host),r=e.toString().match(n);if(null==r)return null;const d=new URL(e.toString());return d.host=i,d.pathname=t.replace(Se,((e,t)=>{var i;return null===(i=null==r?void 0:r.groups)||void 0===i?void 0:i[t]})),d.pathname+="/"===d.pathname?e.pathname.slice(1):e.pathname,d.pathname=d.pathname.replace(o.pathname,""),d}function Te(e,t=window.location.protocol,i=window.location.host){return e.startsWith("/")?new URL(`${t}//${i}${e}`):function(e){try{return Boolean(new URL(e))}catch(e){return!1}}(e)?new URL(e):new URL(`${t}//${i}/${e}`)}function Ce({url:e,mappings:t}){for(const i of t){const t=Ie({originalURL:e,prefix:i.prefix,target:i.target,prefixHost:window.location.host});if(t)return t}return e}function De(e){!function(e){for(const t of e){const e=t.prefix.match(/\{.*?\}/g)||[],i=t.target.match(/\{.*?\}/g)||[];if(e.length!=i.length)throw new Error(`Non matching substituition tokens in: '${t.prefix}', '${t.target}'`);for(const s of e){if(!s.match(/^\{[a-z]+\}$/))throw new Error(`Invalid substituition token: '${s}' in: '${t.prefix}'. Use only the format {a-z}`);if(i.indexOf(s)<0)throw new Error(`Non matching substituition tokens in: '${t.prefix}', '${t.target}'`)}}}(e),e=function(e){return e.sort(((e,t)=>{const i=new URL(`https://${e.target}`).host.split(".");return new URL(`https://${t.target}`).host.split(".").length-i.length}))}(e||[]);const t=window.fetch;window.fetch=function(i,s){const o=Ce({url:Te((null==i?void 0:i.url)||i.toString()),mappings:e});return t(o.toString(),s)};const i=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,s,o,n,r){const d=Ce({url:Te(s),mappings:e});i.apply(this,[t,d.toString(),o,n,r])};class s extends WebSocket{constructor(t,i){super(Ce({url:Te(t instanceof URL?t.toString():t,"wss:"),mappings:e}).toString(),i)}}window.WebSocket=s}var Re,Le=[{prefix:"/discord",target:"discord.com"},{prefix:"/storagegoogleapis",target:"storage.googleapis.com"},{prefix:"/google-analytics",target:"google-analytics.com"},{prefix:"/coeus-frvr",target:"coeus.frvr.com"},{prefix:"/stagingcrucible-frvr",target:"staging.crucible.frvr.com"},{prefix:"/crucible-frvr",target:"crucible.frvr.com"},{prefix:"/frvr",target:"frvr.com"}];!function(e){e[e.getRoomData=0]="getRoomData",e[e.isInRoom=1]="isInRoom",e[e.getRoomId=2]="getRoomId",e[e.getPlayers=3]="getPlayers",e[e.subscribeToPlayerJoined=4]="subscribeToPlayerJoined",e[e.subscribeToPlayerLeft=5]="subscribeToPlayerLeft"}(Re||(Re={}));class Ue{getId(){return le}isInRoom(){return t(this,void 0,void 0,(function*(){return!0}))}getRoomId(){return t(this,void 0,void 0,(function*(){const{data:e}=yield window.discordSDK.commands.getSelectedVoiceChannel();return e.id}))}getRoomData(){return t(this,void 0,void 0,(function*(){const{data:e}=yield window.discordSDK.commands.getSelectedVoiceChannel();return e}))}getPlayers(){var e;return t(this,void 0,void 0,(function*(){const{data:t}=yield window.discordSDK.commands.getSelectedVoiceChannel();return(null===(e=null==t?void 0:t.voice_states)||void 0===e?void 0:e.map((e=>({id:e.user.id,name:e.user.username,image:we(e.user.id,e.user.avatar),channel:le,nickname:e.nick}))))||[]}))}getSupportedAPIs(){return[Re.isInRoom,Re.getRoomId,Re.getRoomData,Re.getPlayers]}isSupportedAPI(e){return this.getSupportedAPIs().includes(e)}}class Oe extends K{constructor(){super(...arguments),this.characteristics=Object.assign(Object.assign({},e.defaultCharacteristics),{allowExternalLinks:!1,allowInternalLinks:!1,allowNavigation:!1,allowSendBeacon:!1})}init(){var e,i,s,o;return t(this,void 0,void 0,(function*(){for(null===(e=this.logger)||void 0===e||e.log("[Discord-sub-channel] init network shims"),this.disableNetworkShims||De(this.URLMappings),yield Z(this.discordSDKPath,"discordSdkScript");!window.DiscordSDK;)null===(i=this.logger)||void 0===i||i.log("[Discord-sub-channel] waiting for discord sdk to load"),yield new Promise((e=>setTimeout(e,100)));window.discordSDK||(window.discordSDK=new window.DiscordSDK(this.discordAppID));const t=setTimeout((()=>{var e;null===(e=this.logger)||void 0===e||e.error("[Discord-sub-channel] discordSDK ready timeout. Likely wrong or missing appId",this.discordAppID)}),1e4);if(yield window.discordSDK.ready(),this.encourageHardwareAcceleration){const e=yield window.discordSDK.commands.encourageHardwareAcceleration();null===(s=this.logger)||void 0===s||s.log("[Discord-sub-channel] Hardware Acceleration is "+(e.data.enabled?"enabled":"disabled"))}clearTimeout(t),null===(o=this.logger)||void 0===o||o.log("[Discord-sub-channel] discordSDK initialized")}))}getId(){return le}setConfig({gameId:e,channels:t}){super.setConfig({gameId:e});const i=null==t?void 0:t.discord;this.discordSDKPath=(null==i?void 0:i.discordSDKPath)||"assets/discord.iframe.sdk.bundle_patched.js",this.discordAppID=null==i?void 0:i.appId,this.URLMappings=[...(null==i?void 0:i.URLMappings)||[],...Le],this.disableNetworkShims=(null==i?void 0:i.disableNetworkShims)||!1,this.encourageHardwareAcceleration=null==i?void 0:i.encourageHardwareAcceleration}onModulesUpdated({logger:e}){this.logger=e}getBootstrapper(){return new ve(this.logger)}getConsentProvider(){return e.consentToAllConsentProvider}getAdsProviders(e){return[]}getIAPProvider(e){return new ue(e,this.logger)}getShortcutProvider(){return e.emptyShortcutProvider}getProfile(){return new fe}getSocialProvider(){return new Ee(this.logger)}getLiveRoomProvider(){return new Ue}getAuthProviders(e,t){return[new me(e,t,this.discordAppID,this.logger)]}getAdsConfig(e){return t(this,void 0,void 0,(function*(){return e}))}}const Ne={crazygames:{"==":[{var:"query.partnerid"},"8289067739"]},mspwa:{or:[{in:["app-info://platform/microsoft-store",{var:"document.referrer"}]},{">=":[{var:"query.mspwa"},""]},{">=":[{var:"query.msstart_sdk_init"},""]}]},discord:{endsWith:["discordsays.com",{var:"location.host"}]}};function ke(e){const t=new URLSearchParams(window.location.search),i={query:Object.fromEntries(t.entries()),document:document,location:location},s=function e(t,i){var s,o;if("object"!=typeof t)return t;const n=Object.keys(t)[0],r=t[n];switch(n){case"and":return r.every((t=>e(t,i)));case"or":return r.some((t=>e(t,i)));case"<":return e(r[0],i)<e(r[1],i);case">":return e(r[0],i)>e(r[1],i);case"<=":return e(r[0],i)<=e(r[1],i);case">=":return e(r[0],i)>=e(r[1],i);case"==":return e(r[0],i)===e(r[1],i);case"!=":return e(r[0],i)!==e(r[1],i);case"var":return r.split(".").reduce(((e,t)=>e&&e[t]),i);case"in":return(null!==(s=e(r[1],i))&&void 0!==s?s:"").includes(e(r[0],i));case"endsWith":return(null!==(o=e(r[1],i))&&void 0!==o?o:"").endsWith(e(r[0],i));default:throw new Error(`Unknown operator: ${n}`)}}(e,i);return!!s}const _e=[{isDetected:e=>ke(e.crazygames),build:()=>new te},{isDetected:e=>ke(e.mspwa),build:()=>new ae},{isDetected:e=>ke(e.discord),build:()=>new Oe}];var Me,xe;if(window.FRVR){const e=null===(xe=null===(Me=window.FRVR.config)||void 0===Me?void 0:Me.channels)||void 0===xe?void 0:xe.web;window.FRVR.setChannel(function(e){null!=e||(e=Ne);const t=_e.find((t=>t.isDetected(e)));return t?t.build():new K}(null==e?void 0:e.subchannelsDetection))}}(FRVRSDK),FRVRSDK.version=FRVRSDK.version||{},FRVRSDK.version.channel=FRVRSDK.version.channel||{},FRVRSDK.version.channel.v="9.1.0",FRVRSDK.version.channel.bts="1696530956265",FRVRSDK.version.channel.name="web";
//# sourceMappingURL=frvr-channel-web.min.js.map
